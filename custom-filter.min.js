/*!
 * Squarespace Universal Filter - Filter any data on your site
 * Author: Michael Mashay <michael@squarespacewebsites.com>
 * License: Commercial License
 */
!function(){var t,e,n,i,r=[],a=window.Y&&Y.one("body"),et=!1;function it(t,e,i){if(!document.getElementById(e)){var a=document.createElement("style");a.type="text/css",a.id=e,a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),i.appendChild(a)}}Object.size=function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i};var v,s,o,l,c,at=(v=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={},c={compressToBase64:function(t){if(null==t)return"";var e=c._compress(t,6,function(t){return s.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:c._decompress(e.length,32,function(t){return d(s,e.charAt(t))})},compressToUTF16:function(t){return null==t?"":c._compress(t,15,function(t){return v(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:c._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(t){for(var e=c.compress(t),i=new Uint8Array(2*e.length),a=0,s=e.length;a<s;a++){var n=e.charCodeAt(a);i[2*a]=n>>>8,i[2*a+1]=n%256}return i},decompressFromUint8Array:function(t){if(null==t)return c.decompress(t);for(var e=new Array(t.length/2),i=0,a=e.length;i<a;i++)e[i]=256*t[2*i]+t[2*i+1];var s=[];return e.forEach(function(t){s.push(v(t))}),c.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":c._compress(t,6,function(t){return o.charAt(t)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),c._decompress(e.length,32,function(t){return d(o,e.charAt(t))}))},compress:function(t){return c._compress(t,16,function(t){return v(t)})},_compress:function(t,e,i){if(null==t)return"";var a,s,n,r={},o={},l="",c="",d="",g=2,u=3,p=2,h=[],m=0,f=0;for(n=0;n<t.length;n+=1)if(l=t.charAt(n),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=u++,o[l]=!0),c=d+l,Object.prototype.hasOwnProperty.call(r,c))d=c;else{if(Object.prototype.hasOwnProperty.call(o,d)){if(d.charCodeAt(0)<256){for(a=0;a<p;a++)m<<=1,f==e-1?(f=0,h.push(i(m)),m=0):f++;for(s=d.charCodeAt(0),a=0;a<8;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1}else{for(s=1,a=0;a<p;a++)m=m<<1|s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s=0;for(s=d.charCodeAt(0),a=0;a<16;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1}0==--g&&(g=Math.pow(2,p),p++),delete o[d]}else for(s=r[d],a=0;a<p;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1;0==--g&&(g=Math.pow(2,p),p++),r[c]=u++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(o,d)){if(d.charCodeAt(0)<256){for(a=0;a<p;a++)m<<=1,f==e-1?(f=0,h.push(i(m)),m=0):f++;for(s=d.charCodeAt(0),a=0;a<8;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1}else{for(s=1,a=0;a<p;a++)m=m<<1|s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s=0;for(s=d.charCodeAt(0),a=0;a<16;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1}0==--g&&(g=Math.pow(2,p),p++),delete o[d]}else for(s=r[d],a=0;a<p;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1;0==--g&&(g=Math.pow(2,p),p++)}for(s=2,a=0;a<p;a++)m=m<<1|1&s,f==e-1?(f=0,h.push(i(m)),m=0):f++,s>>=1;for(;;){if(m<<=1,f==e-1){h.push(i(m));break}f++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:c._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,e,i){var a,s,n,r,o,l,c,d=[],g=4,u=4,p=3,h="",m=[],f={val:i(0),position:e,index:1};for(a=0;a<3;a+=1)d[a]=a;for(n=0,o=Math.pow(2,2),l=1;l!=o;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=e,f.val=i(f.index++)),n|=(0<r?1:0)*l,l<<=1;switch(n){case 0:for(n=0,o=Math.pow(2,8),l=1;l!=o;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=e,f.val=i(f.index++)),n|=(0<r?1:0)*l,l<<=1;c=v(n);break;case 1:for(n=0,o=Math.pow(2,16),l=1;l!=o;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=e,f.val=i(f.index++)),n|=(0<r?1:0)*l,l<<=1;c=v(n);break;case 2:return""}for(s=d[3]=c,m.push(c);;){if(f.index>t)return"";for(n=0,o=Math.pow(2,p),l=1;l!=o;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=e,f.val=i(f.index++)),n|=(0<r?1:0)*l,l<<=1;switch(c=n){case 0:for(n=0,o=Math.pow(2,8),l=1;l!=o;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=e,f.val=i(f.index++)),n|=(0<r?1:0)*l,l<<=1;d[u++]=v(n),c=u-1,g--;break;case 1:for(n=0,o=Math.pow(2,16),l=1;l!=o;)r=f.val&f.position,f.position>>=1,0==f.position&&(f.position=e,f.val=i(f.index++)),n|=(0<r?1:0)*l,l<<=1;d[u++]=v(n),c=u-1,g--;break;case 2:return m.join("")}if(0==g&&(g=Math.pow(2,p),p++),d[c])h=d[c];else{if(c!==u)return null;h=s+s.charAt(0)}m.push(h),d[u++]=s+h.charAt(0),s=h,0==--g&&(g=Math.pow(2,p),p++)}}});function d(t,e){if(!l[t]){l[t]={};for(var i=0;i<t.length;i++)l[t][t.charAt(i)]=i}return l[t][e]}function q(t,e){var i,a=t.split("."),s=a.length,n=e||this;for(i=0;i<s;i++)n=n&&n[a[i]];return n}function st(t){for(var e,i,a=t.length;0!==a;)i=Math.floor(Math.random()*a),e=t[a-=1],t[a]=t[i],t[i]=e;return t}function m(t,e){var a=[],s=[];for(t.replace(/(\d+)|(\D+)/g,function(t,e,i){a.push([e||1/0,i||""])}),e.replace(/(\d+)|(\D+)/g,function(t,e,i){s.push([e||1/0,i||""])});a.length&&s.length;){var i=a.shift(),n=s.shift(),r=i[0]-n[0]||i[1].localeCompare(n[1]);if(r)return r}return a.length-s.length}function nt(t,e){t=(t=t.toString()).replace(/^\s+|\s+$/g,""),e||(t=t.toLowerCase().replace(/\'/g,"-").replace(/\"/g,"-").replace(/\#/g,"-"));for(var i="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",a=0,s=i.length;a<s;a++)t=t.replace(new RegExp(i.charAt(a),"g"),"aaaaaeeeeeiiiiooooouuuunc------".charAt(a));return t.replace(/\s+/g,"-").replace(/\-\-+/g,"-").replace(/\₤/g,"-gbp").replace(/\£/g,"-gbp").replace(/\$/g,"-usd").replace(/\€/g,"-eur").replace(/\&/g,"and").replace(/[^a-zA-Z0-9_\u3400-\u9FBF\s-]/g,"").replace(/\//g,"-").replace(/\:/g,"-").replace(/\;/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function g(t,e,i,a){t*=Math.PI/180,i*=Math.PI/180,e*=Math.PI/180,a*=Math.PI/180;var s=Math.cos(t),n=Math.cos(i),r=Math.sin(t),o=Math.sin(i),l=a-e,c=Math.cos(l),d=Math.sin(l),g=Math.sqrt(Math.pow(n*d,2)+Math.pow(s*o-r*n*c,2)),u=r*o+s*n*c,p=Math.atan2(g,u);return parseFloat((6372795*p/1e3).toFixed(2))}function rt(a,s,n){var r;return function(){var t=this,e=arguments,i=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||a.apply(t,e)},s),i&&a.apply(t,e)}}function ot(t){var e=window.localStorage,i=(t=t.replace(/\//g,"")+"_json")+"_expires";if(!t||!e)return!1;try{var a=e.getItem(i);return!!a&&(!((a=parseInt(a))<(new Date).getTime())&&JSON.parse(e.getItem(t)))}catch(t){return console.log(t),!1}}function lt(t,e,i,a){var s=window.localStorage,n=e,r=(e=e.replace(/\//g,"")+"_json")+"_expires";if(a=a||10,t&&s)try{var o,l=(new Date).getTime()+6e4*a;(o=JSON.stringify(t)).length&&(-1<n.indexOf("/")&&s.getItem(n)&&s.removeItem(n),s.setItem(e,o),s.setItem(r,l))}catch(t){console.log(t)}}function u(){window._scrollBarWidth=window.innerWidth&&document.body&&document.body.offsetWidth?window.innerWidth-document.body.offsetWidth:0,t&&clearTimeout(t),t=setTimeout(function(){!function(){if(r&&r.length){var t=!1;Y.one("body").hasClass("collection-type-products")&&(t=!0),r.forEach(function(t){t.isotope&&(t.itemsWidthStyleNode&&t._setItemsMaxWidthStyle(),t.isotope.layout()),t.loadImages(t.items)}),t&&Y.Global.fire("tweak:reset")}et&&console.log("sync")}(),et&&console.log("resize"),t=null},300)}function p(){e&&clearTimeout(e),e=setTimeout(function(){r&&r.length&&r.forEach(function(t){t.container._node.getBoundingClientRect().top<10&&t.target.settings.closeOnOverScroll&&(t.container.hasClass("mobile-panel-open")||(t.customFiltersWrapper.all(".archive-dropdown-toggle-checkbox").set("checked",!1),t.searchContainer&&t.searchContainer.removeClass("active")))}),e=null},60)}function h(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]&&"object"==typeof e[i]?h(t[i],e[i]):t[i]=e[i]);return t}function ct(t,e){var i=[],a=t&&t.variants?t.variants:!(!t||!t.structuredContent)&&t.structuredContent.variants;return a&&a.length&&(i=a.map(function(t){return t.attributes[e]||""})),i}function f(i){if(i&&i.container&&i.items){var e=Y.all(i.container),a=e.size();if(a){var t="Container: "+i.container+"\nItems: "+i.items;if(i.settings&&i.settings.isotope&&i.settings.isotope.enabled&&(t=t+"\nIsotope: "+JSON.stringify(i.settings.isotope)),setTimeout(function(){!function(t){try{var e=Static&&Static.SQUARESPACE_CONTEXT,i={pluginName:"Universal Filter",pluginPage:e&&e.website.baseUrl?e.website.baseUrl+location.pathname:location.href,pageTitle:document.title,pluginData:t||"No plugin data",siteTitle:e&&e.website.siteTitle||"",siteUrl:e&&e.website.baseUrl||location.origin},a=new XMLHttpRequest;a.open("POST","https://tools.squarewebsites.org/api/sqs-plugins",!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(i))}catch(t){console.log(t)}}(t)},4e4),window.customFiltersInitInterval){var s=0;n=setInterval(function(){if(a<=s)window.clearInterval(n),n=null,et&&console.log("customFilters built");else{var t=e.item(s);(t.ancestor(".sqs-block-summary-v2")||t.ancestor(".sqs-block-gallery"))&&(t=t.ancestor(".sqs-block")),t.hasClass("custom-filter-container")||(i.index=s,t.CustomFilter=new b(t,i),r.push(t.CustomFilter))}s++},window.customFiltersInitInterval)}else e.each(function(t,e){i.settings.hooks&&i.settings.hooks.beforeCreate&&"function"==typeof i.settings.hooks.beforeCreate&&i.settings.hooks.beforeCreate(i),(t.ancestor(".sqs-block-summary-v2")||t.ancestor(".sqs-block-gallery"))&&(t=t.ancestor(".sqs-block")),t.hasClass("custom-filter-container")||i.noNeedCreate||(i.index=e,t.CustomFilter=new b(t,i),r.push(t.CustomFilter))})}}}function F(t,i){return t=t.replace(/{{(\w+)}}/g,function(t,e){return i&&i.hasOwnProperty(e)?i[e]:"auto"})}function b(t,e){if(t){this.target=h({container:".ProductList",items:".hentry",settings:{hidden:!1,position:"top",align:"left",customClasses:"",view:"dropdowns",showItemsCount:!0,itemsCount:{enabled:!0,positionOrder:1},showCheckboxes:!1,closeOptionsOnSelect:!0,closeOnOverScroll:!1,closeOnMouseOut:!1,keepDropdownsOpen:!1,clearAllButton:{enabled:!1,text:"Clear All",place:"before"},urlQuery:!0,requestAttrWithAjax:!0,waitForAjax:!1,useSessionCache:!1,useHistory:!1,initState:{},parentFilter:null,performanceMode:!1,compatCatTagInQuery:!0,useSQSProxy:{enabled:!1,fields:""},optionsDescription:{container:null},updateFilterOptions:{enabled:!0,nonExistOptions:{hide:!1,disable:!1,disableHard:!1,moveBottom:!1},showOptionsCounters:!1,optionsCounterWrap:"- ()"},pagination:{enabled:!1,pageSize:0,place:"bottom",scrollToTop:{duration:600},backgroundColor:"transparent",margin:"3% 0",padding:"0",align:"center",pagesRange:3,pagesAround:2,showPrevNext:{enabled:!1,hideItems:!1,next:"Next",prev:"Prev"},items:{style:"square",width:"32px",margin:"20px",borderWidth:"2px",backgroundColor:"#fff",activeBackgroundColor:"#555",color:"#000",activeColor:"#fff"},loadMoreButton:{enabled:!1,text:"Load more...",alignment:"center",size:"small"}},mobilePanel:{enabled:!0,forceOnWidth:"500px",triggerButtonName:"Filter",align:"left",closeOnSelect:!1,closeOnSearch:!1},advancedMap:{advancedMapContainer:null,activateMarkerInfoOnItemHover:!0,activateItemOnMarkerClick:!0,activateMarkerInfoOnItemClick:!1,desactivateMarkerOnItemMouseOut:!1,updateMapBound:!0,followMapBounds:!1,autocomplete:{enabled:!1,positionOrder:100,text:"Search Zip",minLength:3,customSearchFunc:!1,timeout:300,dimension:{enabled:!0,val:"",values:{}},radius:{enabled:!0,hidden:!1,val:100,step:1,max:200,min:10},circle:{strokeColor:"#65bedc",strokeWeight:1,strokeOpacity:1,fillColor:"#65bedc",fillOpacity:.4},options:{types:["(regions)"],componentRestrictions:{country:"usa"}}}},simpleFilter:{anim:!0,layoutAnim:!1,show:{effect:"scale",transitionDuration:600,stagger:16,easing:"ease-in-out"},hide:{effect:"scale",transitionDuration:200,stagger:36,easing:"ease-in-out"}},isotope:{enabled:!1,transitionDuration:300},mixitup:{enabled:!1,transitionDuration:300},sort:{enabled:!0,title:"Sort",positionOrder:99,items:[]},filter:{enabled:!0,cacheOptions:!0,items:[],category:{positionOrder:2,main:"categoriesDropdown",hideValueLabel:!1,name:"Category",sort:"asc",getAttr:"categories",multiple:!0,strict:!0,hideDefaultLabelIfDirty:!1,showAll:!1},tag:{positionOrder:3,main:"tagsDropdown",hideValueLabel:!1,name:"Tag",sort:"asc",getAttr:"tags",multiple:!0,strict:!0,hideDefaultLabelIfDirty:!1,showAll:!1}},search:{enabled:!0,positionOrder:100,text:"Search",minLength:1,customSearchFunc:!1,timeout:400,searchFunc:function(t){return(t=t._node?t._node:t).textContent.trim()}},hooks:{beforeInit:null,onInit:null,afterInit:null,onStart:null,afterRequest:null,beforeFilter:null,onFilter:null,afterFilter:null}}},e),this.container=t,this._init()}}function w(){a=a||window.Y.one("body");try{window.customFilterSettings||(window.customFilterSettings={targets:[{container:".ProductList,.collection-type-products.view-list .main-content",items:".hentry",settings:{sort:{enabled:!0,items:[{name:"Price",order:"asc|desc"}]}}}]}),window.customFilterSettings&&(window.customFilterSettings.targets&&window.customFilterSettings.targets.length&&(et&&console.log("find target"),window.customFilterSettings.targets.forEach(function(t){t.settings?t.settings.runOnDOMReady?Y.once("domready",function(){f(t)}):t.settings.runDelay?setTimeout(function(){f(t)},t.settings.runDelay):f(t):console.log("No Settings")}),function(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!1),window.dispatchEvent(t)}()),i=Y.Global.on("advanced-maps:initialized",function(a){if(a){var s=a.parentNode&&a.parentNode.className&&-1<a.parentNode.className.indexOf("map-block")?a.parentNode.id:"";r&&r.length&&r.forEach(function(e){var t=e.target.settings.advancedMap;if(s&&t&&t.advancedMapContainer&&(a._map_data&&(!e.coll_data||!e.coll_data.items||e.coll_data.items.length<a._map_data.length)&&(e.coll_data.items=a._map_data),a._map_config&&a._map_config.buildInfoOutside&&a._markers&&a._markers[0].outsideItem?(e.target.items=".outside-marker-item",e.target.settings.performanceMode=!0,t.activateMarkerInfoOnItemHover=!1,e.items=e.container.all(".outside-marker-item"),e.items.size()&&e.items.addClass("custom-filter-grid-item"),e.itemsParent=e.items.item(0).get("parentNode"),e.itemsParent&&e.itemsParent.addClass("custom-filter-grid"),e._addItemsAttributes(),e._buildDropdowns()):e._addItemsAttributes(),e._checkInitState(),e._sortGrid(),t.autocomplete&&t.autocomplete.enabled&&e.mapAutocompleteContainer&&e._initMapAutoComplete(),t.followMapBounds&&a._map)){var i=rt(function(t){e.needBoundsChange||e._followMapBounds(a),e.needBoundsChange=!1},100,t.updateMapBound=!1);a._map.addListener("bounds_changed",i)}})}}),window.addEventListener("resize",u,!1),window.addEventListener("scroll",p,!1)),Y.fire("custom-filter:check-child-filters")}catch(t){console.warn(t)}}b.prototype={addVirtualItems:function(t,e){e&&e.length&&(this.coll_data.items=e),t&&t.addClass("custom-filter-grid-item"),this.virtual_list=this.virtual_list&&this.virtual_list.size()?this.virtual_list.concat(t):t&&t.size()?t:this.container.all(this.target.items),this._addItemsAttributes(!1,this.virtual_list),this._buildDropdowns(),this.customFiltersWrapper&&(!this.customFiltersWrapper.one(".archive-group-name-link.active")||this.customFiltersWrapper.one(".archive-group-name-link.active")&&"all"==this.customFiltersWrapper.one(".archive-group-name-link.active").getAttribute("data-filter-val"))&&this._checkInitState(),this._sortGrid()},loadImages:function(t){var g=this;t=t||this.items;var u=g.container.hasClass("isotope-filter-used");t&&t.size&&t.each(function(t){!t.hasClass("element-hidden")&&t._node.parentNode&&t.all("img").each(function(t){var e=t.get("parentNode");if(e&&e.hasClass("info-marker-image"))return!1;var i="none";e&&(e.hasClass("content-fill")||t.ancestor(".index-gallery")||t.ancestor(".product-image")||t.ancestor(".ProductList-innerImageWrapper")?i="fill":e.hasClass("content-fit")&&(i="fit"));function a(){t.ancestor(".ProductList-item")&&t.ancestor(".ProductList-item").addClass("image-is-loaded")}g.config&&g.config.imageAspectRatio&&"autocolumns"!==g.config.design&&(!e||e._node.style.paddingBottom||e.hasClass("sqs-video-overlay")||e.setStyles({paddingBottom:100/parseFloat(g.config.imageAspectRatio)+"%"}));var s=t.ancestor(".sqs-video-wrapper");if(s)s.videoloader||s.plug(Y.Squarespace.VideoLoader),s.videoloader.fire("refresh");else if(t.hasClass("loaded")||t._node.addEventListener("load",function(){this.classList.add("loaded"),t.fire("refresh"),a()},!1),t.loader)t.width()?u||t.fire("refresh"):t.loader.load();else{if(t.ancestor(".BlogList-item-image-link")&&window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.tweakJSON){var n="stacked"===window.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-blog-list-style"].toLowerCase(),r="auto"===window.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-blog-list-item-image-aspect-ratio-stacked"].toLowerCase();if(n&&r){var o=t._node;o.style.position=null,o.style.top=null,o.style.right=null,o.style.bottom=null,o.style.left=null,o.style.width=null,i=o.style.height=null}else i="fill"}t._no_loader||(t._no_loader=1),t._no_loader++;var l=!0;t.hasClass("ProductList-image--alt")&&!Y.one(".tweak-product-list-item-hover-behavior-show-alternate-image")&&(l=!1),ImageLoader.load(t,{load:l,mode:i}),t._no_loader}if(t.hasClass("loaded")&&t.getAttribute("src")&&0==t._node.style.opacity&&t._node.className&&-1==t._node.className.indexOf("--alt")&&(t._node.style.opacity=1,a()),g.target.settings.performanceMode){var c=t.getAttribute("data-src"),d=t.getAttribute("src");c&&!d&&(t._node.addEventListener("load",function(){this.classList.add("loaded")},!1),t.setStyles({position:"absolute",height:"100%",objectFit:"cover"}).setAttribute("src",c))}})})},addItems:function(e){this.items=this.items&&this.items.size()?this.items.concat(e):e&&e.size()?e:this.container.all(this.target.items);var t=this;if(!this.itemsParent&&this.items.size()&&(this.itemsParent=this.items.item(0).get("parentNode"),this.itemsParent&&this.itemsParent.addClass("custom-filter-grid")),Y.fire("custom-filter-items-added",this.container),this.container.fire&&this.container.fire("custom-filter:items-added",{customFilter:t}),t.filterAnim=!1,t.waitingForNewItems,t.waitingForNewItems=!1,this.isotope){var i=this.isotope.options.transitionDuration;if(this.isotope.once("layoutComplete",function(t){setTimeout(function(){e.each(function(t){t.all("img").each(function(t){t.fire("refresh")})})},i)}),e&&e.size()){t.isotope_item_width?t.isotope_item_width:this.target.settings.isotope.columnWidth?this.target.settings.isotope.columnWidth:this.config?this.config.columnWidth:e.item(0).get("outerWidth");e.each(function(t){t.setStyles({width:"100%",top:null,left:null,visibility:"visible",float:"left"})}),t.isotope.reloadItems(),t.isotope.layout(),t._sortGrid()}}else this.mixitup&&this.mixitup.forceRefresh(),t._sortGrid();this.target.settings.advancedMap&&this.target.settings.advancedMap.activateMarkerInfoOnItemClick&&this.advancedMap&&Y.SQS.Gallery.Manager&&Y.SQS.Gallery.Manager.unlightboxify(this.items)},_buildPagination:function(t){var i=this,e=i.target.settings.pagination,a=t.size()/e.pageSize;if(this.paginationClicked,i.itemsCount&&i.itemsCount.one(".items-count").setAttribute("data-pagination",""),e.enabled){var s=e.showPrevNext&&e.showPrevNext.enabled,n=s&&e.showPrevNext.hideItems;if(1<a){if(this.container.one(".pagination-block"))i.pagination&&i.pagination.empty();else{e.guid=i.target.index,this.pagination=Y.Node.create('<nav class="pagination-block pagination-block-custom-filter-'+e.guid+' pagination-block-plugin clear"></nav>'),e.items&&(e.items.guid=e.guid,e.items.style&&this.pagination.addClass("style-"+e.items.style));try{e.items.lineHeight=parseFloat(e.items.width)-2*parseFloat(e.items.borderWidth),isNaN(e.items.lineHeight)?e.items.lineHeight=e.items.width:e.items.lineHeight+="px"}catch(t){e.items.lineHeight=e.items.width}it(F(".pagination-block.pagination-block-custom-filter-{{guid}} {margin:{{margin}};padding:{{padding}};background-color:{{backgroundColor}};text-align:{{align}}}",e)+F(".pagination-block.pagination-block-custom-filter-{{guid}} .pagination-item{cursor:pointer;padding-bottom:5px;margin-right:{{margin}}}.pagination-block.pagination-block-custom-filter-{{guid}} .pagination-item a{border-width:{{borderWidth}};border-color:{{color}};height:{{width}};width:{{width}};line-height:{{lineHeight}};background-color:{{backgroundColor}};color:{{color}}}.pagination-block-custom-filter-{{guid}} .pagination-item.active a,.pagination-block-custom-filter-{{guid}} .pagination-item:hover a{background-color:{{activeBackgroundColor}};color:{{activeColor}};border-color:{{activeBackgroundColor}}}",e.items),"paginationStylesPlugin-"+e.guid,i.container._node),it('.pagination-block .before-next:not(.active):not(.around),.pagination-block .last-around:not(.active){margin-right: 4px!important}.pagination-block .around-first.around,.pagination-block .pagination-item.before-prev:not(.active):not(.around){margin-left: 4px!important}.pagination-block .pagination-item.show-dot{margin:0 1px!important;pointer-events:none!important}.pagination-block .pagination-item.show-dot:not(.active) a{border:none!important;width:auto!important;background-color:transparent!important}.pagination-block.hidePageNumbers .page-number,.pagination-block[data-page-number="1"] .arrow.prev,.pagination-block[data-page-number="last"] .arrow.next{display:none}.pagination-block:not(.showArrows) .arrow{display:none}.pagination-block-plugin.loadMore-used .pagination-item{display:none}.pagination-block-plugin{margin:3% 0;clear:both;box-sizing:border-box;display:inline-block;width:100%}.pagination-item a{border:none;display:block;white-space:nowrap;text-align:center;padding:0;margin:0;border-width:2px;border-style: solid;transition:all .1s linear;-webkit-transition:all .1s linear}.pagination-block-plugin.style-circle .pagination-item a{border-radius:50%}.pagination-block-plugin.style-pillow .pagination-item a{border-radius:4px}.pagination-block-plugin .pagination-item:last-child{margin:0!important}.pagination-block-plugin .pagination-item{display:inline-block;margin-right:16px;overflow:hidden;vertical-align:middle}',"paginationStylesPlugin",document.body);var r=this.container.one(".sqs-gallery-container");r&&r.addClass("clear");var o=r||this.container.one(".custom-filter-grid");e.place&&"top"===e.place.trim()?o.insert(this.pagination,"before"):o.insert(this.pagination,"after")}s&&i.pagination.addClass("showArrows"),n&&i.pagination.addClass("hidePageNumbers");var l=!1;e.pagesRange&&3<=a/e.pagesRange&&(l=!0);t.size();var c=s&&e.showPrevNext.prev?e.showPrevNext.prev:"Prev";i.pagination.append('<div class="pagination-item arrow prev"><a style="border-radius:0;width:auto;padding:0 5px" data-index="prev">'+c+"</a></div>");for(var d=this.pagination_num,g="",u=1;u<1+a;u++){var p="",h="",m="",f="";if(d!=u&&(d||1!==u)||(p=" active"),(u<d&&u>=d-e.pagesAround||d<u&&u<=d+e.pagesAround)&&d>=e.pagesRange&&(m=" around",g&&(m+=" around-first"),u==d+e.pagesAround&&u>e.pagesRange&&u<a-e.pagesRange&&(m+=" last-around")),l)f=u===e.pagesRange?" before-next":u===parseInt(2+a-e.pagesRange)?" before-prev":"",g=u>e.pagesRange&&u<a-e.pagesRange+1&&!m&&!p&&(h=" show-dot",!0);var v=h&&!p?".":u;i.pagination&&i.pagination.append('<div class="pagination-item page-number pagination-item-'+u+p+h+f+m+'"><a data-index="'+u+'">'+v+"</a></div>")}var b=s&&e.showPrevNext.next?e.showPrevNext.next:"Next";if(i.pagination.append('<div class="pagination-item arrow next"><a style="border-radius:0;width:auto;padding:0 5px" data-index="next">'+b+"</a></div>"),e.loadMoreButton&&e.loadMoreButton.enabled&&(i.pagination.addClass("loadMore-used"),!this.container.one(".pagination-loadMore-button"))){this.loadMoreButton=Y.Node.create(F('<div class="sqs-block-button sqs-block pagination-loadMore-button"><div class="sqs-block-button-container--{{alignment}}" data-alignment="{{alignment}}"><button class="sqs-block-button-element--{{size}} sqs-block-button-element pagination-loadMore">{{text}}</button></div></div>',e.loadMoreButton)),this.pagination&&this.pagination.insert(this.loadMoreButton,"after"),i.pagination.hide()}}else i.pagination_num=1,i.pagination&&i.pagination.remove(),i.pagination=null;if(this.pagination_num&&(this.pagination||this.loadMoreButton)){if(this.pagination){this.pagination.setAttribute("data-page-number",this.pagination_num),this.pagination.all(".active").removeClass("active");var w=this.pagination.one(".pagination-item-"+this.pagination_num);w&&w.addClass("active")}var C=t.size(),_=(this.pagination_num-1)*e.pageSize,y=e.pageSize+_>t.size()?t.size():e.pageSize+_,A=C-y;t.size()>e.pageSize&&(t.each(function(t,e){(e<_||y<=e)&&i.hidden.push(t)}),e.loadMoreButton&&e.loadMoreButton.enabled?t._nodes=t._nodes.slice(0,y):t._nodes=t._nodes.slice(_,y),this.loadMoreButton&&(_=0),i.itemsCount&&i.itemsCount.one(".items-count").setAttribute("data-pagination","("+_+" - "+y+")"),A<1&&this.pagination&&this.pagination.setAttribute("data-page-number","last")),this.loadMoreButton&&(A<1?this.loadMoreButton.hide(!0):this.loadMoreButton.show(!0),i.pagination&&i.pagination.hide(),this.loadMoreButton&&this.loadMoreButton.one(".sqs-block-button-element").setAttribute("data-size",A))}}return this.paginationClicked=!1,t},_init:function(){var D=this;if(Y.one('link[href*="custom-filter/custom-filter.min.css"]')||function(t,e,i){var a=document.createElement("link");a.href=t,a.rel="stylesheet",a.onload=function(){i&&i(null,{nodes:[this]})},(e=e||document.getElementsByTagName("head")[0]).appendChild(a)}("https://assets.squarewebsites.org/custom-filter/custom-filter.min.css",null,function(){D._sortGrid()}),this.container.hasClass("summary-v2-block")&&this.container.getAttribute("data-block-json")&&(this.container.LazySummariesData=JSON.parse(this.container.getAttribute("data-block-json"))),window.location.search&&3<window.location.search.length&&this.container.addClass("cf-location-query-found"),this.target.settings.hooks&&this.target.settings.hooks.beforeInit&&"function"==typeof this.target.settings.hooks.beforeInit&&this.target.settings.hooks.beforeInit(this),this.container.get("parentNode")&&this.container.get("parentNode").addClass("custom-filter-parent-node"),this.items=this.target.items&&this.container.one(this.target.items)?this.container.all(this.target.items):new Y.NodeList,this.existedItems=this.target.items&&this.container.one(this.target.items)?this.container.all(this.target.items):new Y.NodeList,(this.container.hasClass("BlogList")||this.container.hasClass("sqs-blog-list"))&&(this.container=this.container.get("parentNode")),this.container.get("parentNode")&&this.container.get("parentNode").hasClass("custom-filter-container"))console.log("Hey, seems Filter initialized in Parent Node");else{this.config=!!this.container.getAttribute("data-block-json")&&JSON.parse(this.container.getAttribute("data-block-json")),this.scrollEl=Y.one(document.scrollingElement)||Y.one(Y.UA&&Y.UA.gecko||Y.UA&&Y.UA.ie||navigator.userAgent.match(/Trident.*rv.11\./)?"html":"body"),this.first_sort_run=!1,Y.one("#categoryNav")&&Y.one("#categoryNav").hide();var i=this.target.settings.advancedMap;if(i&&i.advancedMapContainer){var t=Y.one(i.advancedMapContainer);t.setAttribute("data-filter","request="+(this.target.settings.useSQSProxys&&this.target.settings.useSQSProxy.enabled)),t&&(this.advancedMap=t.one(".custom-map-block"))}var e=["custom-filter-container","custom-filter-new-ver"];D.filterAnim=!1,this.target.settings.requestAttrWithAjax&&this.container.addClass("cf-ajax-request"),this.target.settings.customClasses&&this.target.settings.customClasses.split(" ").forEach(function(t){t=nt(t.trim()),e.push(t)}),this.target.settings.useLocalCache&&(this.target.settings.useSessionCache=!0),this.items.size()&&(this.items.each(function(t,e){t.hasAttribute("data-start-index")||t.setAttribute("data-start-index",e)}),this.items.addClass("custom-filter-grid-item"),this.itemsParent=this.items.item(0).get("parentNode"),this.target.settings.shuffle&&(this.items._nodes=st(this.items._nodes),setTimeout(function(){D._addItemsAttributes(!0)},0))),this.container.LazySummariesData&&this.container.LazySummariesData.enableLazy&&!this.container.LazySummariesData.loadAllOrPag&&(this.target.settings.pagination.enabled=!0,this.target.settings.pagination.pageSize=this.container.LazySummariesData.pageSize||this.target.settings.pagination.pageSize,this.target.settings.pagination.align="center",this.target.settings.pagination.place="bottom",this.target.settings.pagination.loadMoreButton={enabled:!0,text:this.container.LazySummariesData.loadMoreText,alignment:"center",size:"small"});var a=!0;if(this.container.hasClass("summary-v2-block")&&this.container.one(".summary-item-list")&&(this.container.one(">.sqs-block-content").addClass("custom-filter-grid"),this.itemsParent=this.container.one(".summary-item-list"),a=!1),this.target.settings.itemsParent&&(this.itemsParent=this.container.one(this.target.settings.itemsParent)),this.itemsParent&&a&&this.itemsParent.addClass("custom-filter-grid"),this.sqs_query_factor=this.itemsParent&&(this.itemsParent.hasClass("ProductList-grid")||this.itemsParent.hasClass("ProductList-grid")||this.itemsParent.hasClass("BlogList")||this.itemsParent.hasClass("sqs-blog-list")||this.itemsParent.hasClass("blog-list"))&&(-1<window.location.href.indexOf("category=")||-1<window.location.href.indexOf("/category/")||-1<window.location.href.indexOf("tag=")||-1<window.location.href.indexOf("/tag/")),this.sqs_query_factor?Y.one("body").addClass("cf-sqs-query-in-url"):Y.one("body").removeClass("cf-sqs-query-in-url"),(this.container&&-1<this.container._node.className.indexOf("ProductList")||this.itemsParent&&-1<this.itemsParent._node.className.indexOf("ProductList"))&&(Y.one("body").addClass("tweak-product-list-filter-display-hide").removeClass("tweak-product-list-filter-display-left-side").removeClass("tweak-product-list-filter-display-right-side").removeClass("tweak-product-list-filter-display-top"),window.getComputedStyle&&this.items.item(0))){var s=window.getComputedStyle(this.items.item(0)._node).marginRight;if(s)it("@media only screen and (min-width: 701px){body .custom-filter-position-right .ProductList-grid.custom-filter-grid,body .custom-filter-position-left .ProductList-grid.custom-filter-grid{max-width: calc(100% - "+(280-parseFloat(s))+"px)}}","grid-width-"+D.target.index,D.container._node)}if(this._initFilterPosition(),this.target.settings.optionsDescription&&this.target.settings.optionsDescription.container&&(this.optionsDescriptionContainer=Y.one(this.target.settings.optionsDescription.container),this.optionsDescriptionContainer&&(e.push("cf-options-description-used"),this._initDescriptionContainer())),this.currentCats=[],this.currentTags=[],this.collectionUrl=this.target.settings.collectionUrl,this.getFilterAttrObj={},this.getRangesAttrObj={},this.filterParams={},this.items_prices=[],this.pagination_num=1,this.sortObj={index:"[data-index] parseInt",index_desc:"[data-index] parseInt"},this.target.settings.performanceMode&&e.push("performance-mode-used"),this.config&&!this.target.settings.collectionUrl){this.collectionUrl=this.config.collectionUrl;var n=this.container.one(".summary-title-link")||this.container.one(".summary-thumbnail-container")&&this.container.one(".summary-thumbnail-container")._node.pathname&&this.container.one(".summary-thumbnail-container");if(!this.collectionUrl)if(n){var r=n._node.pathname.split("/");r.length<=3||6==r.length?this.collectionUrl="/"+r[1]:6<r.length&&(this.collectionUrl="/"+r[1]+"/"+r[2])}else this.collectionUrl=location.pathname;this.config.filter&&(this.config.filter.tag||this.config.filter.category)&&(this.collectionUrl+=this.config.filter.category?"?category="+this.config.filter.category.trim():"?",this.collectionUrl+=this.config.filter.tag?"&tag="+this.config.filter.tag.trim():"")}this.collectionUrl=this.collectionUrl?encodeURI(this.collectionUrl):location.pathname;var o=this.target.settings.hidden?"display:none":"";if(this.customFiltersWrapper=Y.Node.create('<div class="customFiltersWrapper clearfix clear" style="'+o+'"><div class="customFiltersContainer"><div style="display:none!important" class="sqs-block reset-first-sqs-block hidden" hidden="true"><span hidden="true"></span></div></div><button class="mobile-panel-close" style="opacity:0"></button><div style="display:none!important" class="sqs-block reset-last-sqs-block hidden" hidden="true"><span hidden="true"></span></div></div>'),this.customFilters=this.customFiltersWrapper.one(".customFiltersContainer"),this.searchRegex="",this.filter_selectors="",this.sort_param="index",this.container.fire&&this.container.fire("custom-filter:filter-before-init",{customFilter:D}),Y.fire("custom-filter:filter-before-init",{customFilter:D}),D.target.settings.hooks&&D.target.settings.hooks.onInit&&"function"==typeof D.target.settings.hooks.onInit&&D.target.settings.hooks.onInit(D),this.u_id="custom-filter-uid-"+this.target.index,this.target.settings.showItemsCount){var l=parseInt(this.target.settings.itemsCount.positionOrder);this.itemsCount=Y.Node.create('<div class="items items-count-wrapper sqs-block" data-pos-order="'+l+'"><div class="sqs-block-content"><div class="items-count-inner"><span class="items-count">'+this.items.size()+"</span></div></div></div>"),this.customFilters.append(this.itemsCount)}var c=this.target.settings.view||"dropdowns";e.push("custom-filter-view-"+c),this.target.settings.showCheckboxes&&e.push("cf-show-checkboxes");var d=this.target.settings.filter;if(d.enabled&&((d.category||d.tag)&&(d.items||(d.items=[]),d.tag&&(d.tag.main&&"object"==typeof d.tag||(d.tag={}),d.tag.main="tagsDropdown",d.tag.name="Tags",d.tag.subName="tag",d.items[0]&&"tagsDropdown"===d.items[0].main||d.items.unshift(d.tag)),d.category&&(d.category.main&&"object"==typeof d.category||(d.category={}),d.category.main="categoriesDropdown",d.category.subName="category",d.category.name="Categories",d.items[0]&&"categoriesDropdown"===d.items[0].main||d.items.unshift(d.category))),d&&d.items&&d.items.length&&d.items.forEach(function(t,e){if(t.name){var i=t.name.trim(),a=parseInt(t.positionOrder)||4+e,s=t.subName?nt(t.subName):nt(i);D.filterParams[s]||(D.filterParams[s]=[]);var n=t.main||"name-"+nt(i,!0),r=t.defined||!1,o=t.getAttr?t.getAttr:"",l=!1;o&&-1<(o+"").indexOf("variant|")&&(l=o.split("|")[1],o=ct);var c=t.allOption||"All",d=t.allowedOptions||[],g=t.notAllowedOptions||!1,u=t.allowedPrefSuf||"",p=null;if(d.length&&t.sort&&"asAllowed"===t.sort){p={};for(var h=0,m=d.length;h<m;h++)p[d[h]]=h}var f=t.hidden?" hidden":"",v=t.hideDefaultLabelIfDirty?" hide-def-label":"",b=t.hideValueLabel?"hide-val-label":"",w=!t.logic||"and"!==t.logic.trim()&&"or"!==t.logic.trim()?"and":t.logic.trim(),C=!t.multipleLogic||"and"!==t.multipleLogic.trim()&&"or"!==t.multipleLogic.trim()?"or":t.multipleLogic.trim(),_=t.children||"",y=!!t.checkChildren||!1,A=t.defaultAttrs||"",F=!t.hasOwnProperty("strict")||!!t.strict,k=!!t.multiple,O=t.hideTitle?"hidden":"",x=t.hasOwnProperty("allLabel")&&' data-all-label="'+t.allLabel+'"'||' data-all-label=": '+c+'"',S=t.initText?'data-init-text="'+t.initText+'"':"",I=nt(i)+"-target-"+D.target.index+"-"+(new Date).getTime(),M="";if(t.quickSearch&&t.quickSearch.enabled&&!0===t.quickSearch.enabled)M='<li class="quick-options-search"><input type="text" placeholder="'+(t.quickSearch.placeholder||"")+'" /><span class="reset-button qos-reset-button icn-cancel"></span></li>';var P=Y.Node.create('<div class="sqs-block archive-block sqs-block-archive filterDropdown '+n+" "+f+v+b+'" data-quick-search="'+!!M+'" data-pos-order="'+a+'" data-all-option="'+c+'" data-multiple-logic="'+C+'" data-logic="'+w+'" data-children="'+_+'" data-check-children="'+y+'" data-defined="'+r+'" data-multiple="'+k+'" data-strict="'+F+'" data-filter="'+s+'"><div class="sqs-block-content"><div class="archive-block-wrapper archive-block-setting-layout-dropdown archive-block-setting-text-alignment-left archive-block-setting-multicolumns"><input class="archive-dropdown-toggle-checkbox" id="dropdown-filter-'+I+'" type="checkbox"><label class="archive-dropdown-toggle-label" for="dropdown-filter-'+I+'"><span class="archive-dropdown-toggle-title '+O+'"'+S+'><span class="defaultLabel"><span>'+i+'</span></span><span class="filterValues" '+x+'></span><span class="reset-button icn-cancel"></span></span><span class="icn-down-open"></span></label><ul class="archive-group-list">'+M+"</ul></div></div></div>"),q=t.options||[],T=t.showAll,L=!!(t.optionsDelimiter||"string"==typeof t.optionsDelimiter&&t.optionsDelimiter.length)&&t.optionsDelimiter;T&&-1===q.indexOf(c)&&q.unshift(c),D.getFilterAttrObj[s]?console.warn(s+" - method already exists in getFilterAttrObj"):D.getFilterAttrObj[s]={attr:o,showAll:T,optionsDelimiter:L,variantOption:l,logic:w,lowercase:!!t.lowercase,multiple:k,multipleLogic:C,allOption:c,notAllowedOptions:g,allowedOptions:d,allowedPrefSuf:u,allowedHash:p,defaultAttrs:A,currentOptions:q,container:P,disableOptionsUpdate:!!t.disableOptionsUpdate,filterFunction:t.filterFunction,quickSearch:!!M,sort:t.sort||"asc"},D.customFilters.append(P)}}),D.categoryFilter=D.customFilters.one(".categoriesDropdown"),D.tagFilter=D.customFilters.one(".tagsDropdown"),D.target.settings.filter.cacheOptions)){var g=D.u_id+"_"+nt(D.customIndexUrl||D.collectionUrl)+"_filter_options_"+location.pathname;D.filterCachedOptions=ot(g)}D._addItemsAttributes(!0),D._buildDropdowns();var u=this.target.settings.sort;if(u&&u.enabled&&u.items&&u.items.length){var p="sort-target-"+D.target.index+"-"+(new Date).getTime(),h=u.initText?'data-init-text="'+u.initText+'"':"",m=u.hidden?"hidden":"",f=parseInt(u.positionOrder),v=u.hideDefaultLabelIfDirty?" hide-def-label":"",b=u.defined||"",w=u.hasOwnProperty("allLabel")&&' data-all-label="'+u.allLabel+'"'||"",C=u.hideValueLabel?"hide-val-label":"";this.sortContainer=Y.Node.create('<div class="sqs-block archive-block sqs-block-archive sortDropdown '+m+v+C+'" data-defined="'+b+'" data-pos-order="'+f+'"><div class="sqs-block-content"><div class="archive-block-wrapper archive-block-setting-layout-dropdown archive-block-setting-text-alignment-left archive-block-setting-multicolumns"><input class="archive-dropdown-toggle-checkbox" id="dropdown-sort-'+p+'" type="checkbox"><label class="archive-dropdown-toggle-label" for="dropdown-sort-'+p+'"><span class="archive-dropdown-toggle-title"'+h+'><span class="defaultLabel"><span>'+u.title+'</span></span><span class="sortValues" '+w+'></span><span class="reset-button icn-cancel"></span></span><span class="icn-down-open"></span></label><ul class="archive-group-list"></ul></div></div></div>'),u.items.forEach(function(s){var n=s.name?s.name.trim():"Set name here",t=s.order?s.order.split("|"):s.order||["asc"],r=s.hidden?" hidden":"",o=!s.hasOwnProperty("showOrder")||s.showOrder,l="price"===nt(n)?" parseInt":"",c=s.orderTexts?s.orderTexts.split("|"):[],d=c.length?"hide-pseudo":"";t&&t.length&&t.forEach(function(t,e){if(D.sortObj[nt(n)+"_"+t])console.warn(nt(n)+"_"+t+" - method already exists in sortObj");else{D.sortObj[nt(n)+"_"+t]=s.sort||"[data-"+nt(n)+"]"+l;var i=o?"_"+t:"_"+t+" hide-order",a=c[e]||"";D.sortContainer.one("ul").append('<li class="archive-group '+nt(n)+i+r+'"><a href="?sort='+nt(n)+"_"+t+'" data-sort="'+nt(n)+"_"+t+'" class="archive-group-name-link '+d+'">'+n+'<span class="'+nt(n)+"-"+t+'">'+a+"</span></a>")}})}),this.customFilters.append(D.sortContainer)}var _=this.target.settings.search;if(_&&_.enabled){var y=_.text.trim()||"Search";f=parseInt(_.positionOrder);this.searchMinLength=_.minLength,this.searchContainer=Y.Node.create('<div class="sqs-block custom-items-search" data-pos-order="'+f+'"><div class="sqs-block-content"><span class="search-icon icn-search"></span><div data-preview="false" class="search-wrap sqs-search-ui-button-wrapper color-dark"><input minlength="'+_.minLength+'" class="search-input" placeholder="'+y+'" type="text"/><span class="reset-button icn-cancel"></span></div></div></div>'),this.customFilters.append(this.searchContainer),this.searchContainer.one(".search-icon").on("click",function(t){t.halt(),D.target.settings.closeOptionsOnSelect&&D.customFiltersWrapper.all(".archive-dropdown-toggle-checkbox").set("checked",!1),D.searchContainer.toggleClass("active"),D.searchContainer.hasClass("active")&&D.searchContainer.one(".search-input")._node.focus()}),_.searchFunc&&"function"==typeof _.searchFunc?this.searchFunction=_.searchFunc:_.searchFunc&&"string"==typeof _.searchFunc&&-1<["body","tags","categories"].indexOf(_.searchFunc)&&(this.searchAttr=_.searchFunc,this.searchFunction=function(t){var e="";return(t=t._node?t._node:t)._item_data&&t._item_data[D.searchAttr]&&(e=(t._item_data[D.searchAttr]+"").trim()),e})}if(i&&i.advancedMapContainer&&i.autocomplete.enabled){y=i.autocomplete.text.trim()||"Search Map",f=parseInt(i.autocomplete.positionOrder);this.searchMinLength=i.autocomplete.minLength,this.mapAutocompleteContainer=Y.Node.create('<div class="sqs-block custom-items-search map-autocomplete-search" data-pos-order="'+f+'"><div class="sqs-block-content"><span class="search-icon icn-search"></span><div data-preview="false" class="search-wrap sqs-search-ui-button-wrapper color-dark"><input minlength="'+i.autocomplete.minLength+'" class="search-input" placeholder="'+y+'" type="text"/><span class="reset-button icn-cancel"></span></div></div></div>');function A(){var t=i.autocomplete.dimension.val||1e4,e=i.autocomplete.radius.val?i.autocomplete.radius.val*t:1e5;D.advancedMap&&D.advancedMap._node&&D.advancedMap._node.radiusCircle&&e!==D.advancedMap._node.radiusCircle.getRadius()&&(D.advancedMap._node.radiusCircle.setRadius(e),D._followMapBounds())}this.mapAutocompleteContainer.one(".search-wrap");var F=Y.Node.create('<div class="sqs-block map-autocomplete-dimension-radius" data-pos-order="'+f+'"><div class="sqs-block-content"></div></div>'),k=!1;if(i.autocomplete.radius&&i.autocomplete.radius.enabled){var O=i.autocomplete.radius.hidden?" hidden":"",x=i.autocomplete.radius.step||1,S=i.autocomplete.radius.max||100,I=i.autocomplete.radius.min||1,M=i.autocomplete.radius.val||S,P=Y.Node.create('<div class="map-autocomplete-radius"><span class="radius-control quantity-input'+O+'"><input type="number" step="'+x+'" min="'+I+'" max="'+S+'" value="'+M+'" /><div class="quantity-nav"><div class="quantity-button quantity-up" data-val="up">+</div><div class="quantity-button quantity-down" data-val="down">-</div></div></span></div>');P.one("input").on("change",function(t){var e=t.currentTarget.get("value");i.autocomplete.radius.val=parseFloat(e),A()}),k=!0,F.one(".sqs-block-content").append(P)}if(i.autocomplete.dimension&&i.autocomplete.dimension.enabled){var q=i.autocomplete.dimension.hidden?" hidden":"",T="",L=i.autocomplete.dimension.values;M=i.autocomplete.dimension.val;if(L)for(var N in L)if(L.hasOwnProperty(N)){var B=L[N],j=M&&N==M?" selected":"";T+='<option value="'+B+'"'+j+">"+N+"</option>",j&&(i.autocomplete.dimension.val=B)}var E=Y.Node.create('<div class="map-autocomplete-dimension cf-selectbox"><span class="dimension-control'+q+'"><select>'+T+'</select><span class="icn-down-open"></span></span></div>');E.one("select").on("change",function(t){var e=t.currentTarget.get("value");i.autocomplete.dimension.val=parseFloat(e),A()}),k=!0,F.one(".sqs-block-content").append(E)}this.customFilters.append(this.mapAutocompleteContainer),k&&this.customFilters.append(F),this.mapAutocompleteContainer.one(".search-icon").on("click",function(t){t.halt(),D.mapAutocompleteContainer.toggleClass("active"),D.mapAutocompleteContainer.hasClass("active")&&D.mapAutocompleteContainer.one(".search-input")._node.focus()});var z=rt(function(t){D.mapAutocompleteContainer.addClass("searching"),t.newVal=t.newVal?t.newVal:!!t.target&&t.target.value,t.newVal&&t.newVal.trim()||D.mapAutocompleteContainer.removeClass("searching"),t.newVal?D.mapAutocompleteContainer.addClass("dirty"):D.mapAutocompleteContainer.removeClass("dirty")},i.autocomplete.timeout,!1);this.mapAutocompleteContainer.one(".search-input").on("valuechange",function(t){z(t)}),this.mapAutocompleteContainer.delegate("click",function(t){t.halt(),D.filterAnim=!0,D.mapAutocompleteContainer.one(".search-input").set("value",""),D.mapAutocompleteContainer.removeClass("dirty"),D.advancedMap._node.radiusCircle&&(D.advancedMap._node.radiusCircle.setMap(null),D.advancedMap._node.radiusCircle=null),D.firstMapBoundRun=!1,D.needBoundsChange=!0,D._sortGrid()},".reset-button")}var W=D.customFiltersWrapper.all(".sqs-block-archive .archive-group-list");W&&W.each(function(t,e){t.setStyle("zIndex",1100-e)}),this.target.settings.useHistory&&(e.push("cf-using-history"),D.blockPushState=!0,this.popstateListener=function(t){D.blockPushState=!0,D._checkInitState(!0)},window.addEventListener("popstate",this.popstateListener)),this.container.delegate("click",function(t){t.halt(),D.customFiltersWrapper.all(".archive-group-name-link.active").removeClass("active"),D.filterAnim=!0,D._sortGrid()},".clearAllBtn"),this.container.delegate("click",function(t){t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e=t.currentTarget.getAttribute("data-index");if("prev"==e?e=1<D.pagination_num?D.pagination_num-1:1:"next"==e&&(e=D.pagination_num+1),e){function i(){D.filterAnim=!0,D.paginationClicked=!0,D.pagination_num=parseInt(e),D._sortGrid()}if("bottom"==D.target.settings.pagination.place&&D.target.settings.pagination.scrollToTop&&D.target.settings.pagination.scrollToTop.duration){var a=D.container.getY()-160,s=window.pageYOffset||document.documentElement.scrollTop,n=D.target.settings.pagination.scrollToTop.duration/1e3;300<Math.abs(s-a)?D.scrollEl.anim({},{to:{scroll:[0,a]},duration:n,easing:Y.Easing.easeBoth}).run().on("end",function(){i()}):i()}else i()}},".pagination-item a"),this.container.delegate("click",function(t){t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e=!(!D.pagination||!D.pagination.one(".pagination-item.active a"))&&D.pagination.one(".pagination-item.active a").getAttribute("data-index");if(e){D.pagination.one('.pagination-item a[data-index="'+(parseInt(e)+1)+'"]')?(D.filterAnim=!1,D.paginationClicked=!0,D.pagination_num=parseInt(e)+1,D._sortGrid()):console.log("No next page",e)}},".pagination-loadMore"),this.container.delegate("click",function(t){t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.addClass("clicked"),D.target.settings.closeOptionsOnSelect&&D.customFiltersWrapper.all(".archive-block-wrapper:not(.clicked) .archive-dropdown-toggle-checkbox").set("checked",!1),D.searchContainer&&D.searchContainer.removeClass("active"),t.currentTarget.removeClass("clicked")},".archive-block-wrapper"),this.target.settings.closeOnMouseOut&&D.customFiltersWrapper.delegate("hover",function(t){t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.addClass("hovered")},function(t){t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.removeClass("hovered").one(".archive-dropdown-toggle-checkbox").set("checked",!1)},".archive-block");function R(){D.target.settings.hooks&&D.target.settings.hooks.onStart&&"function"==typeof D.target.settings.hooks.onStart&&D.target.settings.hooks.onStart(D),D._addItemsAttributes(),D._buildDropdowns(),D._checkInitState(),D._sortGrid(),D.container.addClass("cf-request-finished"),D.target.settings.hooks&&D.target.settings.hooks.afterRequest&&"function"==typeof D.target.settings.hooks.afterRequest&&D.target.settings.hooks.afterRequest(D)}this.coll_data&&this.coll_data.collection&&this.coll_data.collection.id&&R();var U=this.itemsParent&&(this.itemsParent.hasClass("ProductList-grid")||"productList"==this.itemsParent.getAttribute("id"))&&(-1<window.location.href.indexOf("category=")||-1<window.location.href.indexOf("/category/")||-1<window.location.href.indexOf("tag=")||-1<window.location.href.indexOf("/tag/")),V=this.itemsParent&&this.itemsParent.hasClass("eventlist")||this.itemsParent&&this.itemsParent.hasClass("productlist-container")&&Y.one(".productpager-list")||this.itemsParent&&(U||this.itemsParent.hasClass("BlogList")||this.itemsParent.hasClass("sqs-blog-list")||this.itemsParent.hasClass("blog-list"));if(V&&(Y.one(".BlogList-pagination")&&Y.one(".BlogList-pagination").hide(),Y.one(".productpager-list")&&Y.one(".productpager-list").hide()),this.target.settings.customIndexUrl)this.requestComplete=!1,function(o,l){return new Y.Promise(function(n){var r={collection:{},items:[]};Y.io(o+"?format=main-content",{on:{success:function(t,e){var i=e.responseText;if(i&&-1<i.indexOf('id="collectionsIndex"')){if(-1<i.indexOf('<textarea id="collectionsIndex" class="hidden" style="display:none">'))i=i.split('<textarea id="collectionsIndex" class="hidden" style="display:none">')[1].split("</textarea>")[0];else{var a=document.createElement("div");a.innerHTML=i;var s=a.querySelector("#collectionsIndex");i=s.value||s.querySelector(".sqs-block-content")&&s.querySelector(".sqs-block-content").innerText||""}if(i)try{r=0==i.indexOf("LZString")?JSON.parse(at.decompressFromEncodedURIComponent(i.slice(8))):JSON.parse(i),l&&lt(r,o,!0),n(r)}catch(t){console.warn("error : "+t),n(r)}else n(r)}else n(r)},failure:function(t,e){console.warn("error : "+e.status),n(r)}}})})}(this.target.settings.customIndexUrl,D.target.settings.useSessionCache).then(function(t){D.coll_data={collection:{},items:t},V?(-1<D.collectionUrl.indexOf("/category/")&&(D.collectionUrl=D.collectionUrl.split("/category/")[0]),-1<D.collectionUrl.indexOf("/tag/")&&(D.collectionUrl=D.collectionUrl.split("/tag/")[0]),function(i,a){return new Y.Promise(function(o){var l={html:""},c=function(t){var e="";if(t){var i=t.querySelectorAll('a[href*="?offset="]');if(i&&i.length)for(var a=i.length-1;0<=a;a--){var s=i[a];s&&-1==s.search.indexOf("reverse")&&(e=s.search.replace("?",""))}}return e},t=c(a.container._node),e=function(t){return!!t&&(t.search&&(-1<t.search.indexOf("?category=")||-1<t.search.indexOf("?tag=")||-1<t.search.indexOf("?year=")||-1<t.search.indexOf("?month="))||-1<t.pathname.indexOf("/category/")||-1<t.pathname.indexOf("/tag/"))}(window.location);t||e?function n(r,t){var e="";t&&(e="?"+t,-1<r.indexOf("?")&&(e="&"+t));var i=e&&-1<e.indexOf("?")?"&format=main-content":"?format=main-content";Y.io(r+e+i,{on:{success:function(t,e){var i=e.responseText;if(i){var a=document.createElement("div");a.innerHTML=i;var s=c(a);if(a)try{s?(l.html+=a.innerHTML,n(r,s)):(l.html+=a.innerHTML,o(l))}catch(t){console.warn("error : "+t),o(l)}else o(l)}else o(l)},failure:function(t,e){console.warn("error : "+e.status),o(l)}}})}(i,t):o(l)})}(D.collectionUrl,D).then(function(t){if(D.existedItems=D.existedItems?D.existedItems:D.target.items&&D.container.one(D.target.items)?D.container.all(D.target.items):new Y.NodeList,t.html){var e=Y.Node.create(t.html),i=!1,a=[],s=[];if(D.existedItems.each(function(t){var e=t.getAttribute("id")||t.getAttribute("data-item-id")||t.getAttribute("data-slide-id"),i=t.one(".eventlist-title-link")||t.one(".BlogList-item-title")||t.one(".ProductList-item-link")||t.one('a[data-content-field="title"]');(i=i&&i.getAttribute("href"))&&s.push(i),e&&-1==e.indexOf("yui_3_17_2")&&a.push(e)}),e&&e.one(D.target.items)){if((i=e.one(D.target.items)?e.all(D.target.items).addClass("item-filter-loaded"):new Y.NodeList).size())if(a.length)for(var n=i._nodes.length-1;0<=n;n--){var r=(o=i._nodes[n]).id||o.getAttribute("data-item-id")||o.getAttribute("data-slide-id");r&&-1==r.indexOf("yui_3_17_2")&&-1<a.indexOf(r)&&i._nodes.splice(n,1)}else if(s.length)for(n=i._nodes.length-1;0<=n;n--){var o,l=(o=i._nodes[n]).querySelector(".eventlist-title-link")||o.querySelector(".BlogList-item-title")||o.querySelector(".ProductList-item-link")||o.querySelector('a[data-content-field="title"]');(l=l&&l.getAttribute("href"))&&-1<s.indexOf(l)&&i._nodes.splice(n,1)}else console.log("No Way to filter new items.");D.addVirtualItems(i,D.coll_data.items),i.size()&&D.addItems(i)}}R()})):R()});else if(this.target.settings.requestAttrWithAjax)if(this.requestComplete=!1,V)-1<this.collectionUrl.indexOf("/category/")&&(this.collectionUrl=this.collectionUrl.split("/category/")[0]),-1<this.collectionUrl.indexOf("/tag/")&&(this.collectionUrl=this.collectionUrl.split("/tag/")[0]),function(e,n,g){return new Y.Promise(function(c){var d={collection:{},past:[],upcoming:[],items:[],html:""};n&&(-1<n.indexOf("http://")||-1<n.indexOf("https://"))&&(e=n+"",n=!1);var t=ot(n||e);t&&g.target.settings.useSessionCache?c(t):function r(o,l){if(n)Y.io(o+"?format=main-content",{on:{success:function(t,e){var i=e.responseText;if(i&&-1<i.indexOf('id="collectionsIndex"')){if(-1<i.indexOf('<textarea id="collectionsIndex" class="hidden" style="display:none">'))i=i.split('<textarea id="collectionsIndex" class="hidden" style="display:none">')[1].split("</textarea>")[0];else{var a=document.createElement("div");a.innerHTML=i;var s=a.querySelector("#collectionsIndex");i=s.value||s.querySelector(".sqs-block-content")&&s.querySelector(".sqs-block-content").innerText||""}if(i)try{0==i.indexOf("LZString")?d.items=JSON.parse(at.decompressFromEncodedURIComponent(i.slice(8))):d.items=JSON.parse(i),g.target.settings.useSessionCache&&lt(d,n),c(d)}catch(t){console.warn("error : "+t),c(d)}else c(d)}else c(d)},failure:function(t,e){console.warn("error : "+e.status),c(d)}}});else{var t=-1<o.indexOf("?")?"&format=page-context":"?format=page-context";t+="&cache="+((new Date).getTime()+"").substr(0,8),l&&(t+="&offset="+l),g.isEventsCollection&&(t+="&view=list");var e={};g&&g.target&&g.target.settings.useSQSProxys&&g.target.settings.useSQSProxy.enabled&&(e={url:window.location.origin+o,format:"page-context"},g.target.settings.useSQSProxy.fields&&(e.fields=g.target.settings.useSQSProxy.fields),o="https://api.squarewebsites.org/sqs-items-json",t=""),Y.io(o+t,{data:e,on:{success:function(t,e){var i=e.responseText;if(i)try{var a=JSON.parse(i),s=!!a.upcoming||!!a.past||!!a.items||!!a.collection&&!!a.collection.collections;if(s&&(a.upcoming&&(d.upcoming=d.upcoming.concat(a.upcoming)),a.past&&(d.past=d.past.concat(a.past)),a.items&&(d.items=d.items.concat(a.items)),a.collection.collections&&(d.items=d.items.concat(a.collection.collections))),l=a.offset&&a.offset!==l?a.offset:a.pagination&&a.pagination.nextPageOffset&&l!==a.pagination.nextPageOffset?a.pagination.nextPageOffset:"",a.collection&&"products"===a.collection.typeName&&!0,a.squarespace&&a.squarespace["main-content"]&&d.items&&d.items.length>g.existedItems.size()){var n=Y.Node.create(a.squarespace["main-content"].replace(/<squarespace:escape>/g,"").replace(/<\/squarespace:escape>/g,""));n&&n.one(g.target.items)&&(d.html+=a.squarespace["main-content"].replace(/<squarespace:escape>/g,"").replace(/<\/squarespace:escape>/g,""))}l&&!0,l?(g.hasOwnProperty("__all_loaded")&&(s?(a.items,a.past,a.upcoming):a.items),g.__all_loaded=!1,r(o,l)):(!d.html&&a.squarespace["main-content"]&&(n=Y.Node.create(a.squarespace["main-content"].replace(/<squarespace:escape>/g,"").replace(/<\/squarespace:escape>/g,"")))&&n.one(g.target.items),g.__all_loaded=!0,g.target.settings.useSessionCache&&lt(d,o),c(d))}catch(t){console.warn("error : "+t),c(d)}else c(d)},failure:function(t,e){console.warn("error : "+e.status),c(d)}}})}}(e)})}(this.collectionUrl,this.target.settings.customIndexUrl,this).then(function(t){if(D.coll_data||(D.coll_data={collection:{},items:[]}),t&&t.items&&t.items.length&&(!D.coll_data||!D.coll_data.items||t.items.length>=D.coll_data.items.length||U)){if(D.coll_data=t,D.existedItems=D.existedItems?D.existedItems:D.target.items&&D.container.one(D.target.items)?D.container.all(D.target.items):new Y.NodeList,t.html){var e=Y.Node.create(t.html),i=!1,a=[],s=[];if(D.existedItems.each(function(t){var e=t.getAttribute("id")||t.getAttribute("data-item-id")||t.getAttribute("data-slide-id"),i=t.one(".eventlist-title-link")||t.one(".BlogList-item-title")||t.one(".productlist-item-link")||t.one(".ProductList-item-link")||t.one('a[data-content-field="title"]');(i=i&&i.getAttribute("href"))&&s.push(i),e&&-1==e.indexOf("yui_3_17_2")&&a.push(e)}),e&&e.one(D.target.items)){if((i=e.one(D.target.items)?e.all(D.target.items).addClass("item-filter-loaded"):new Y.NodeList).size())if(a.length)for(var n=i._nodes.length-1;0<=n;n--){var r=(o=i._nodes[n]).id||o.getAttribute("data-item-id")||o.getAttribute("data-slide-id");r&&-1==r.indexOf("yui_3_17_2")&&-1<a.indexOf(r)&&i._nodes.splice(n,1)}else if(s.length)for(n=i._nodes.length-1;0<=n;n--){var o,l=(o=i._nodes[n]).querySelector(".eventlist-title-link")||o.querySelector(".BlogList-item-title")||o.querySelector(".productlist-item-link")||o.querySelector(".ProductList-item-link")||o.querySelector('a[data-content-field="title"]');(l=l&&l.getAttribute("href"))&&-1<s.indexOf(l)&&i._nodes.splice(n,1)}else console.log("No Way to filter new items.");D.addVirtualItems(i,t.items),i.size()&&D.addItems(i)}}}else D.coll_data=t;R()});else{var H=this.collectionUrl;this.config&&this.config.enableLazy?(this.container&&this.container._node&&this.container._node.LazySummariesData&&this.container._node.LazySummariesData.existedItems&&this.container._node.LazySummariesData.__current&&this.addVirtualItems(this.container._node.LazySummariesData.existedItems,this.container._node.LazySummariesData.__current),R()):function(e,i){return new Y.Promise(function(r){var o={collection:{},items:[]};var t=ot(e);t&&i.target.settings.useSessionCache?r(t):function a(s,n){var t={format:"json",view:"list",cache:((new Date).getTime()+"").substr(0,8)};(n=n&&(-1<n.indexOf("%26")||-1<n.indexOf("&"))?n.split("%26")[0].split("&")[0]:n||"")&&(t.offset=n),i&&i.target&&i.target.settings.useSQSProxys&&i.target.settings.useSQSProxy.enabled&&(t={url:window.location.origin+s},i.target.settings.useSQSProxy.fields&&(t.fields=i.target.settings.useSQSProxy.fields),s="https://api.squarewebsites.org/sqs-items-json"),Y.io(s,{data:t,on:{success:function(t,e){var i;try{i=e.responseJSON||JSON.parse(e.responseText),o.collection=i.collection,i.items&&i.items.length||i.upcoming&&i.upcoming.length||i.past&&i.past.length?(o.items=i.items?o.items.concat(i.items):o.items.concat(i.upcoming,i.past),i.pagination&&i.pagination.nextPage&&n!==i.pagination.nextPageUrl.split("offset=")[1]?a(s,i.pagination.nextPageUrl.split("offset=")[1]):r(o)):r(o)}catch(t){return et&&console.log("JSON Parse failed!"),!1}},failure:function(t){console.warn("error : "+t.message),r(o)}}})}(e)})}(H,this).then(function(t){D.coll_data=t,R(),D.target.settings.useSessionCache&&lt(D.coll_data,D.collectionUrl)})}if(e.push(this.u_id),this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&(e.push("use-mobile-panel"),this.target.settings.mobilePanel.align&&e.push("cf-mobile-panel-align-"+this.target.settings.mobilePanel.align)),this.target.settings.keepDropdownsOpen&&e.push("keep-dropdowns-open"),this.target.settings.pagination&&this.target.settings.pagination.enabled&&this.target.settings.pagination.loadMoreButton&&this.target.settings.pagination.loadMoreButton.enabled&&(e.push("cf-loadMoreButton-enabled"),this.pagination_num=1),!this.target.settings.simpleFilter.anim||this.target.settings.isotope&&this.target.settings.isotope.enabled)e.push("no-used-css-animation");else if(this.target.settings.simpleFilter.layoutAnim)e.push("using-layout-animation");else{this.target.settings.simpleFilter.persistent&&e.push("persistent-animation"),e.push("used-css-animation"),e.push("show-animation-"+this.target.settings.simpleFilter.show.effect),e.push("hide-animation-"+this.target.settings.simpleFilter.hide.effect);var Q=this.target.settings.simpleFilter.show.easing,G="."+D.u_id+".used-css-animation  .custom-filter-grid-item{transition: opacity "+this.target.settings.simpleFilter.show.transitionDuration+"ms "+Q+", transform "+this.target.settings.simpleFilter.show.transitionDuration+"ms "+Q+"}";if(this.target.settings.simpleFilter.hide.transitionDuration){var J=this.target.settings.simpleFilter.hide.easing;G+="."+D.u_id+".used-css-animation .hiding .custom-filter-grid-item{transition: opacity "+this.target.settings.simpleFilter.hide.transitionDuration+"ms "+J+", transform "+this.target.settings.simpleFilter.hide.transitionDuration+"ms "+J+"}"}it(G,"stylesheet-"+(D.container.getAttribute("id")||D.container._node&&D.container._node._yuid),D.container._node)}var K=this.customFilters.all(".sqs-block");if(K._nodes.sort(function(t,e){return(t=parseInt(t.getAttribute("data-pos-order")))-(e=parseInt(e.getAttribute("data-pos-order")))}),D._checkInitState(),D._initFiltering(),D.first_sort_run||D.target.settings.requestAttrWithAjax&&(!D.target.settings.requestAttrWithAjax||D.target.settings.waitForAjax)||D._sortGrid(),this.customFilters.insert(K,null),this.target.settings.hidden&&D.customFiltersWrapper.setStyles({display:"none",visibility:"hidden"}),this.target.settings.updateFilterOptions&&this.target.settings.updateFilterOptions.enabled&&(this.target.settings.updateFilterOptions.showOptionsCounters&&e.push("cf-show-options-counter"),this.target.settings.updateFilterOptions.nonExistOptions&&this.target.settings.updateFilterOptions.nonExistOptions.disable&&e.push("cf-non-exist-options-disable"),this.target.settings.updateFilterOptions.nonExistOptions&&this.target.settings.updateFilterOptions.nonExistOptions.disableHard&&e.push("cf-non-exist-options-disable-hard"),this.target.settings.updateFilterOptions.nonExistOptions&&this.target.settings.updateFilterOptions.nonExistOptions.hide&&e.push("cf-non-exist-options-hide")),this.target.settings.clearAllButton&&this.target.settings.clearAllButton.enabled&&1<this.customFilters.all(".archive-block").size()){e.push("custom-filter-clear-all-enabled");var Z=this.target.settings.clearAllButton.text||"Clear All",X=this.target.settings.clearAllButton.place&&"after"===this.target.settings.clearAllButton.place?"after":"before";this.clearAllBtn=Y.Node.create('<div class="sqs-block clearAllBtnWrapper"><div class="sqs-block-content"><a href="#" class="clearAllBtn">'+Z+"</a></div></div>");var $=this.customFilters.one(".sqs-block[data-pos-order]")?this.customFilters.one(".sqs-block[data-pos-order]:not(.items)"):this.customFilters.one(".filterDropdown")||this.customFilters.one(".sortDropdown");"before"==X?$&&D.customFilters.insert(D.clearAllBtn,$):($=D.customFilters.all(".sortDropdown").size()?D.customFilters.all(".sortDropdown"):D.customFilters.all(".filterDropdown")).size()&&$.item($.size()-1).insert(D.clearAllBtn,"after")}if(this.target.settings.parentFilter&&Y.one(this.target.settings.parentFilter)&&(e.push("cf-child-filter"),this.parentFilter=Y.one(this.target.settings.parentFilter),this.parentFilter&&this.parentFilter._node&&(this.parentFilter._node.__childFilters=this.parentFilter._node.__childFilters||[],this.parentFilter._node.__childFilters.push(this),this.parentFilter.addClass("cf-parent-filter"))),e=e.toString().replace(/,/g," "),this.container.addClass(e),this.target.settings.placeFiltersTo){D.container._node&&(D.container._node.className=D.container._node.className.replace(/custom-filter-position-/g,"no-position-"));var tt=!1;"object"==typeof this.target.settings.placeFiltersTo&&this.target.settings.placeFiltersTo.desktop&&this.target.settings.placeFiltersTo.mobile||(tt=Y.one(this.target.settings.placeFiltersTo)),tt?D.placedContainer=tt.addClass("cf-placed-filters").addClass(e).addClass(D.positionClasses).append(this.customFiltersWrapper):(console.log("Sorry, place container is not found."),D.container.prepend(D.customFiltersWrapper))}else D.container.hasClass("sqs-block-gallery")&&D.container.one(".sqs-gallery-container")?D.container.one(".sqs-gallery-container").prepend(D.customFiltersWrapper):D.container.prepend(D.customFiltersWrapper);this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&(this.container.prepend('<button class="mobile-filter-trigger">'+this.target.settings.mobilePanel.triggerButtonName+"</button>"),this.container.delegate("click",function(t){t.preventDefault(),D.parentFilter&&D.parentFilter.CustomFilter&&D.parentFilter.CustomFilter.container&&D.parentFilter.CustomFilter.container.one(".mobile-filter-trigger")?D.parentFilter.CustomFilter.container.one(".mobile-filter-trigger").simulate("click"):(D.customFiltersWrapper.hasClass("cf-mp-transitions")||D.customFiltersWrapper.addClass("cf-mp-transitions"),D.container.toggleClass("mobile-panel-open"),D.container.hasClass("mobile-panel-open")?(D.placedContainer&&D.placedContainer.addClass("mobile-panel-open"),Y.one("body").setStyles({marginRight:window._scrollBarWidth,overflow:"hidden"}),Y.one("body").addClass("filter-scroll-lock")):(D.placedContainer&&D.placedContainer.removeClass("mobile-panel-open"),Y.one("body").removeClass("filter-scroll-lock").setStyles({marginRight:"auto",overflow:"auto"})))},".mobile-filter-trigger"),this.customFiltersWrapper.delegate("click",function(t){D.container.removeClass("mobile-panel-open"),D.placedContainer&&D.placedContainer.removeClass("mobile-panel-open"),Y.one("body").removeClass("filter-scroll-lock").setStyles({marginRight:"auto",overflow:"auto"})},".mobile-panel-close"),this.target.settings&&this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&this.target.settings.mobilePanel.forceOnWidth&&(-1==(this.target.settings.mobilePanel.forceOnWidth+"").indexOf("px")&&-1==(this.target.settings.mobilePanel.forceOnWidth+"").indexOf("em")&&parseFloat(this.target.settings.mobilePanel.forceOnWidth)&&(this.target.settings.mobilePanel.forceOnWidth=this.target.settings.mobilePanel.forceOnWidth+"px"),window.mob_stls_tpl=at.decompressFromEncodedURIComponent("N4OgxgrgzgLg9gWwLQDMCWAbGBTATksOAOxgEM0i8RpskE4AjTWgB1Mo3GnmXSzyQQ0AEyQAtAARdYiAGKYcuKAHVcpFizzAWcKGhhpiALnQAPbMIDcDODB5GADJYSlcAcwqPrpMAGs3uHAQRKKEGHC4RgDEKLHWEcJ4RgBMLKYSUHAYIhJRDvnOpKZIAO4iMAAWRgAcDgCkhcVlwpU1DgBuJZbNrQCM+Q0V2GhuFTBtDe1oekzZMACeRlMzGNgAhGgIOrhkJM4USEMjY0YA7ABsdRtbEbswlijhpONExOub23f7RIfDo+MAZnyaUscHaeEecBKRgqIkSREsAC8kBREqYUr0ACynTHVAHnTEATm6mAwBAq7Dc2CMMDURCgKAiCEstPYegMxCQLECmh2i1Z9MZuAQAF9pDxUAoBIQSORKLhqFBaPRZqx2NhOJAZLwpfghKJJOK5LqVGoNFQwCg6CwkAL2YZ6cA7foHUhhBA1ByiEYQACoCy6fbOQYEBQ3KhgmAvUZsKQlSifkF7s6vW6NaRFr6oGKtRK+IoCMQyBQqDQ6IxmFz1ZruIhJfw9SJxFJc8aG6b1LyW7WEPJ2wBhItyrQ9Kr9eqWI7-IzjhpsYTCMMzhxpCQAVjqElxq43lh0Qe9uHTBnBllI2TcP302AQUCMsFc91K2AYvn0SDBEPCJSQUDAgQwbIiDcGkgjACpQXBXBIR-RZSAgeBIK-KEkHRWEF2wIgcx7esCxlYt5UVZUK1WKsOCNHUG0EJsxBAFVKzYDgP00Ihu21PtFA7c1cCdQMhQQGlAwwZ5sABYQAAoHAAGmkhwAEprk+dhk0DF1OUSYTFgcKBFNuZTsO1XDpSHEsFTLejSMYjUKKMxsDToki1SYuAWKkCynI1AhwiVIxSBQRQpJs-NjNlUyiPLVUyOs1tKILfVxAcyKrLJFzMLcxyorJMBvOpBhsCFbBeLZNSfg0jMfWSbMgt1QtQsI8yMuS6qqPi2j3My5i0sShjqy83RcvyiJCrtfijECMgcHEzE10SNw5MsZ9X3fEamTG2wRKmmbsDmgy8xq-DhzM+N2qamLbOo+yTt61LWO6yzeuy-rfP8rQVuFNaJuwcSkGm2b5sWt8YFtPjVvGjafq2nbmrwkz6uOxrq2hgRWqR-ApmwH96ESXBbqgABHKAkAYcI-CkVxwLQcE3R5YQoR+eA3DcUjhLyjAydwCmqeEGm6dtOBGdIgwYFWEBFz5KRgtwAA1c8IGwKBArOyXaoI0t4aSxGlZqlGtao9HMbgbHcYJomSd8dnOdobmXNpkp6f5pnaBZjULdhLmebtvmBdoIWRbFhYpEyHYZYwOWoGARcoBYTSjAoIDaGJuA-F2utlYOsKGo18jdbimi2J4Di8C4rsQHJt2E7N0ozS7CBODLynaACIIbWyWBtF0EqxuPBv4lwbGjFeShLFwY5xicVZ-K8Fx3E8JwXCacoxwGFPYpC1WjuIrPopw5XWvzttONUTstAnseAzZUa7WEnAAA1vt6fo6jklfzvTuHN567Od+1mjwCtK6mLnhGD8MAmFFD717CaI+3FFbfyom-NWH97pf0MrvX+loIqf08kAy8SAR7-AgYXJQ0DeTAHwScJwb0BJXxEnfB+9Rn6oxVodcKADt6oJ-gadKkVla0hGFSHikdo7lTjiWU2SdfAvzTrDRBmDkHsL2i1POd0PJZRyhHaYwjFiJ2TkwhBG85GqKYXvJhAQRDAGnh4e2LAjBAhBJCZ4A83h7lIAuJcDgpH7RkQYthNYOFKK4aYkewgnEwHElEbkhsIBRgADLTBgHJUJ4kQAAAVAjulifEpAZjhCJNeGE6gvhsnBLkhYoopRF7LnqLpHYykSQtCXhOSxng7HpAcBIdpHi9HeMIVA6ueBA4mx0b4YA2VYyRBsJUB4TwXjONHFUhozTvROHnIuYCy5Vxz3KfM2cnj4HeKYframNs6ZQF6e2EhAyQD40JsMspC8GkLJqXcHMVog5A1PoHW4AARD2RBFZvNuHg0eXydi-JOXbduB4u7Xwbs8upqylz9DSPCvY8AbHwXgKi+4p9fIITgNi4eo88VYo+HpEgeyYZ1QtHAgsRysZ4FujFIhxcrk3PEX4MpM8fiTPsNUEEiL1ldJzmvFhIq0ZoAxuWI25zD79NwIM25ZsjDCVgOSTAwguVWMcJS0VYVxVIHpYbRlsqi6XIVaXDm5cOVFJKPKqFncjywvBLq-A+jDmSoNjKiiLLzWuwbjaqux8LX1ypk3CALd4nABsMUKAFJbZOKHjYPuSRUjpEyNkYQuR8hOGRKibA6J+iNAqY8+hDQdkDGLVOE4QIVymCQtBb8SA4L4tdcw-VtKBBGu9cyvpwbFU2psteW8v5xngW0K4tZIFeibPqX0Ze3TqUKgNd2k1Pq+3cQHcModOAR1KjLoHMdFQUQyg0VHGOg9sBtvdSuz10q129oufKrdZsd03kJvuq1h6y5BpYGerRRhhl7g7tGJ1zwe7zxLfOicMbfzxqhIm7ALi3FCuvQc29UqGU41NcQ591yhmvrOsOj9R7v1Wt-WR8CCYWAIWAPHX4xKKBDBHvcZN-dL1oaXR6zDxrsMgEluClgttbqhqtn8r2jskDOwwLA-xVL17ca9Wu95gnhP+vdhC+23spOkFZsACt9ROMKYw0pvjAm-nqbE5piTzNdMu0tZbY5QneYM0k77bAsnFHybFZ2iVPHvUqYsw5611tnOe1c7Z1mlmnPCZsz7fQqx9OVMJACOoIoRRAA"),it("@media only screen and (max-width:"+this.target.settings.mobilePanel.forceOnWidth+")"+mob_stls_tpl.replace(/-uid-Z/g,"-uid-"+D.target.index),"cf-mobilePanel-"+D.target.index,D.container._node))),i&&(i.activateMarkerInfoOnItemHover&&this.container.delegate("hover",function(t){i.activateMarkerInfoOnItemHover&&(t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget._markerInst&&t.currentTarget._markerInst.openInfo&&t.currentTarget._markerInst.openInfo())},function(){D.advancedMap&&D.advancedMap._node&&D.advancedMap._node._map&&i.desactivateMarkerOnItemMouseOut&&D.advancedMap._node._closeInfo&&D.advancedMap._node._closeInfo()},".custom-filter-grid-item"),i.activateMarkerInfoOnItemClick&&this.container.delegate("click",function(t){D.advancedMap&&(t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget._markerInst&&t.currentTarget._markerInst.openInfo&&t.currentTarget._markerInst.openInfo())},".custom-filter-grid-item")),this.customFiltersWrapper.all(".quantity-input").each(function(t){var s=t.one("input"),n=(t.one(".quantity-up"),t.one(".quantity-down"),parseFloat(s.getAttribute("step"))),r=parseFloat(s.getAttribute("min")),o=parseFloat(s.getAttribute("max"));t.delegate("click",function(t){t.preventDefault(),function(t){var e=parseFloat(s.get("value")),i=0,a="up"==t?o<=e:e<=r;i="up"==t?a?e:e+n:a?e:e-n,s.set("value",i),s.simulate("change")}(t.currentTarget.getAttribute("data-val"))},".quantity-button")}),this.all_filter_classes=e+" "+this.positionClasses,this.container.fire("custom-filter-init",this.container),this.container.fire&&this.container.fire("custom-filter:filter-init",{customFilter:D}),Y.fire("custom-filter:filter-init",{customFilter:D}),D.target.settings.hooks&&D.target.settings.hooks.afterInit&&"function"==typeof D.target.settings.hooks.afterInit&&D.target.settings.hooks.afterInit(D)}},_initDescriptionContainer:function(){if(this.optionsDescriptionContainer){this.optionsDescriptionContainer.addClass("cf-descr-activated");this.optionsDescriptionContainer.all("h3").each(function(t){var e=nt(t._node.innerText),i=function(t,e,i){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var a=[];for(t=t.nextElementSibling;t&&!t.matches(e);)t=((!i||t.matches(i))&&a.push(t),t.nextElementSibling);return a}(t._node,"h3"),a=Y.Node.create('<div class="cf-option-descr '+e+'"></div>');a&&i.length&&(a.prepend(i),t.insert(a,"after"))}),this.optionsDescriptionContainer.addClass("cf-descr-initialized").removeClass("hidden")}},_showOptionsDescriptions:function(){for(var t in this.optionsDescriptionContainer.all(".cf-option-descr").removeClass("active"),this.currentFilterValues)if(this.currentFilterValues.hasOwnProperty(t)&&0!==t.indexOf("__")&&this.currentFilterValues[t].sel){var e=this.optionsDescriptionContainer.one(this.currentFilterValues[t].sel);e&&e.addClass("active")}},_initFilterPosition:function(){var t=this.target.settings.position||"top",e=this.target.settings.align||"center";this.positionClasses="custom-filter-position-"+t+" custom-filter-align-"+e,this.container.addClass("custom-filter-position-"+t).addClass("custom-filter-align-"+e).addClass("clear clearfix")},_buildFilterSelectors:function(){var n=this;n.needRunFilterFunctions=!1,n.filter_selectors="";var t=[];for(var e in n.filterParams)if(n.filterParams.hasOwnProperty(e)&&n.filterParams[e]&&n.filterParams[e].length){var i={name:e,selectors:n.filterParams[e]};i.logic=n.getFilterAttrObj[e]&&n.getFilterAttrObj[e].logic?n.getFilterAttrObj[e].logic:"and",i.multipleLogic=n.getFilterAttrObj[e]&&n.getFilterAttrObj[e].multipleLogic?n.getFilterAttrObj[e].multipleLogic:"or",i.multiple=!!n.getFilterAttrObj[e]&&n.getFilterAttrObj[e].multiple,i.filterFunction=!(!n.getFilterAttrObj[e]||!n.getFilterAttrObj[e].filterFunction)&&n.getFilterAttrObj[e].filterFunction,t.push(i)}if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length)for(var a=this.container._node.__childFilters,s=a.length-1;0<=s;s--)n._checkChildFilterForOptions(a[s]);return t.length&&t.forEach(function(t,e){if(t.selectors&&t.selectors.length){var i="or"===t.multipleLogic?t.selectors+"":t.selectors.join(""),a=!!n.filter_selectors&&n.filter_selectors.split(","),s=[];t.filterFunction&&"function"==typeof t.filterFunction&&(i="*-*",n.needRunFilterFunctions=!0),a?"and"===t.logic?(a.forEach(function(e){e&&i.split(",").forEach(function(t){t&&"*-*"!==t?s.push(e+t):"*-*"==t&&s.push(e)})}),n.filter_selectors=s.join()):n.filter_selectors+=","+i:n.filter_selectors=i}}),Y.fire&&Y.fire("custom-filter:currentFilters",{customFilter:n,currentFilters:t}),n.filter_selectors&&n.filter_selectors.length&&","===n.filter_selectors[n.filter_selectors.length-1]&&(n.filter_selectors=n.filter_selectors.substring(0,n.filter_selectors.length-1)),n.filter_selectors},_sortNodes:function(t){var a=this,s=!1,n=!1,r=!1,o=a.sortObj[a.sort_param]||a.sortObj.index;if(!o)return t;"function"!=typeof o&&(s=-1<o.indexOf("parseInt"),n=-1<o.indexOf("parseFloat"),r=-1<o.indexOf("]")),s&&(o=o.split("parseInt")[0]),n&&(o=o.split("parseFloat")[0]);var l=-1<a.sort_param.indexOf("desc"),c=[];-1<a.sort_param.indexOf("price_")&&!s&&!n&&(s=!0);var e=t._nodes.slice(0);t._nodes.sort(function(t,e){var i="";return a.sort_param in a.sortObj&&("function"==typeof o?i=(t=a.sortObj[a.sort_param](t,t.itemData))<(e=a.sortObj[a.sort_param](e,e.itemData))?-1:e<t?1:0:o&&(o=o.replace(/ /g,"").replace(/\[/g,"").replace(/\]/g,""),(!r&&t.querySelector(o)&&e.querySelector(o)||r&&t.getAttribute(o)&&e.getAttribute(o))&&(r&&e.getAttribute(o)&&t.getAttribute(o)?(t=t.getAttribute(o).toLowerCase().replace(/ /g,""),e=e.getAttribute(o).toLowerCase().replace(/ /g,"")):e.querySelector(o)&&t.querySelector(o)&&(t=t.querySelector(o).textContent.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""),e=e.querySelector(o).textContent.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,"")),i=s?(t=parseInt(t))-(e=parseInt(e)):n?(t=parseFloat(t))-(e=parseFloat(e)):t<e?-1:e<t?1:0))),0===i&&t&&(t._node||t.nodeName)&&(i=l?parseInt(e.getAttribute("data-index"))-parseInt(t.getAttribute("data-index")):parseInt(t.getAttribute("data-index"))-parseInt(e.getAttribute("data-index"))),0===i&&c.push(i),i});return c.length===t._nodes.length-1?t._nodes=e:l&&t._nodes.reverse(),t},_updateFilterOptions:function(t){var r=this;this.target.settings.updateFilterOptions&&this.target.settings.updateFilterOptions.enabled&&this.filtersDropdowns&&this.filtersDropdowns.size()&&this.filtersDropdowns.each(function(t){t.all(".archive-group-name-link").each(function(t){var e=t.getAttribute("data-filter")+"-"+t.getAttribute("data-filter-val");if(r.filterSelectors[e]){var i=r.filterSelectors[e];if(i){var a=i.length;if(a?t.removeClass("not-in-filter-view"):t.addClass("not-in-filter-view"),!t.hasAttribute("data-items-count")||t.getAttribute("data-items-count")!=a){var s=r.target.settings.updateFilterOptions.optionsCounterWrap,n=s?s.slice(0,-1)+a+s.slice(-1):a;t.setAttribute("data-items-count",n),t.setAttribute("data-count",a)}}}})})},_checkChildOptionsToHide:function(i,a,t,s,e){if(!t.hasClass("filter-hidden")){var n=this,r=t.getAttribute("data-filter").trim();t.all(".archive-group-name-link[data-filter]").each(function(t){var e=t.getAttribute("data-filter-val").trim();n.itemsParent.one(a+"."+r+"-"+e)?(t.get("parentNode").show().removeClass("hidden-by-parent"),s&&t.get("parentNode").addClass("showed-by-parent"),i.checkedChildren[r].push(e)):(s&&t.get("parentNode").hasClass("showed-by-parent")||t.get("parentNode").hide().addClass("hidden-by-parent"),i.checkedChildren[r]&&-1<i.checkedChildren[r].indexOf(e)&&i.checkedChildren[r].splice(i.checkedChildren[r].indexOf(e),1))})}},_addMarkersInstancesToItems:function(){var i=this,t=this.target.settings.advancedMap;t&&t.advancedMapContainer&&(this.advancedMap=Y.one(t.advancedMapContainer+" .custom-map-block"),this.advancedMap&&this.advancedMap._node._markersObj&&(this.container.addClass("cf-map-found"),t.activateItemOnMarkerClick&&(i.advancedMap._node._activatingFilterItems=!0),this.items.each(function(t){var e=!(!t._node._item_data||!t._node._item_data.id)&&t._node._item_data.id;e&&i.advancedMap._node._markersObj&&i.advancedMap._node._markersObj["marker-"+e]&&((i.advancedMap._node._markersObj["marker-"+e].outsideItem=t)._markerInst=i.advancedMap._node._markersObj["marker-"+e],t._node._markerInst=i.advancedMap._node._markersObj["marker-"+e])}),t.activateMarkerInfoOnItemClick&&Y.SQS.Gallery.Manager&&Y.SQS.Gallery.Manager.unlightboxify(this.items)))},_filterAdvancedMapMarkers:function(){var t=this,e=null,i=30,a=this.target.settings.advancedMap;window.google&&window.google.maps&&(a.updateMapBound||a.followMapBounds&&t.needBoundsChange)&&(e=new google.maps.LatLngBounds);function s(t){t.hasClass("element-showed")?(t._markerInst.getVisible()||t._markerInst.setVisible(!0),e&&(e.extend(t._markerInst.getPosition()),n=!0),r.push(t._markerInst)):(t.hasClass("element-hidden")||-1<t._node.style.display.indexOf("none")||0==t.width()||0==t.height())&&t._markerInst.getVisible()&&t._markerInst.setVisible(!1)}var n=!1,r=[];if(this.advancedMap._node._markersObj){for(var o in t.advancedMap._node._markersObj)if(t.advancedMap._node._markersObj.hasOwnProperty(o)){var l=t.advancedMap._node._markersObj[o],c=l.outsideItem;c?s(c):t.filter_selectors?l.setVisible(!1):l.setVisible(!0)}}else this.items.each(function(t,e){t._markerInst&&s(t)});this.advancedMap._node._markerCluster&&(this.advancedMap._node._markerCluster.clearMarkers(),this.advancedMap._node._markerCluster.addMarkers(r)),(e&&n&&this.advancedMap&&this.advancedMap._node._map||this.advancedMap._node.radiusCircle)&&(this.advancedMap._node.radiusCircle&&(e=this.advancedMap._node.radiusCircle.getBounds(),i=2),this.advancedMap._node._mapBound=e,t.needBoundsChange=!0,this.advancedMap._node._map.fitBounds(e,i),this.advancedMap._node._map.panToBounds(e))},_sortGrid:function(){var u=this;if(u.first_sort_run=!0,u.currentFilterValues={},u.virtual_list&&u.virtual_list.size(),u.target.settings.hooks&&u.target.settings.hooks.beforeFilter&&"function"==typeof u.target.settings.hooks.beforeFilter&&u.target.settings.hooks.beforeFilter(u),(u.itemsParent&&u.itemsParent.hasClass("sqs-gallery")||u.itemsParent&&u.itemsParent.getData("gallery"))&&(u.gallery=u.itemsParent.getData("gallery"),u.autocolumns_there&&u.gallery&&!u.container.hasClass("performance-mode-used")&&u.gallery.refresh()),this.advancedMap&&this.items.size()&&!this.items.item(this.items.size()-1)._markerInst&&this._addItemsAttributes(),this.filtersDropdowns&&this.filtersDropdowns.size()&&this.filtersDropdowns.each(function(t){var n=!!t.getAttribute("data-strict")&&"true"===t.getAttribute("data-strict"),r=!!t.getAttribute("data-multiple")&&"true"===t.getAttribute("data-multiple"),o=t.getAttribute("data-multiple-logic")||"or",l=t.getAttribute("data-logic")||"or",c=t.getAttribute("data-filter").trim();u.filterParams[c]=[];var e=t.one(".archive-dropdown-toggle-title"),i=t.one(".archive-dropdown-toggle-title .filterValues"),a=(!t.getAttribute("data-children")||t.getAttribute("data-children").split(","),!t.getAttribute("data-check-children")||t.getAttribute("data-check-children"),!!t.getAttribute("data-defined")&&"true"===t.getAttribute("data-defined"));a&&!t.one(".active")&&t.one('[data-filter-val="all"]')?t.one('.archive-group-name-link[data-filter-val="all"]')&&t.one('.archive-group-name-link[data-filter-val="all"]').addClass("active"):a&&!t.one(".active")&&t.one(".archive-group-name-link")&&t.one(".archive-group-name-link").addClass("active");t.all(".archive-group-name-link[data-filter]");if(t.one(".archive-group-name-link.active")){var d="";if(!t.hasClass("filter-hidden")){var g=t.all(".archive-group:not(.hidden-by-parent) .archive-group-name-link.active");g.each(function(t,e){d+=t.get("innerHTML"),1<g.size()&&e<g.size()-1&&(d+='<span class="divider">, </span>');var i=t.getAttribute("data-filter-val").trim(),a={};a.value=i,a.attr=u.getFilterAttrObj?u.getFilterAttrObj[c].attr:"",a.filterFunction=!!u.getFilterAttrObj&&u.getFilterAttrObj[c].filterFunction,a.textValue=(t.get("textContent")||t.get("innerText")).replace(/\r?\n|\r/g,"").trim(),a.param=c,a.multiple=r,a.multipleLogic=o,a.logic=l;var s=n?"."+c+"-"+i:'[class*="'+c+"-"+i+'"]';a.sel=s,u.filterParams[c].push(s),u.currentFilterValues[c]=a,u.currentFilterValues["__"+c+"-values"]||(u.currentFilterValues["__"+c+"-values"]=[]),u.currentFilterValues["__"+c+"-values"].push(a.textValue)}),i&&i.set("innerHTML",d),e.addClass("dirty"),t.addClass("dirty")}}else i&&i.set("innerHTML",""),e.removeClass("dirty"),t.removeClass("dirty")}),this.sortContainer){var t=this.sortContainer.one(".archive-dropdown-toggle-title"),e=this.sortContainer.one(".archive-dropdown-toggle-title .sortValues"),i=this.sortContainer.getAttribute("data-defined");!this.sortContainer.one(".active")&&i&&this.sortContainer.one('[data-sort="'+i+'"]')&&this.sortContainer.one('[data-sort="'+i+'"]').addClass("active");var a=this.sortContainer.one(".active");a?(e&&e.set("innerHTML",u.sortContainer.one(".active").get("innerHTML")),t&&t.addClass("dirty")&&this.sortContainer.addClass("dirty"),u.sort_param=a.getAttribute("data-sort")||"",et&&console.log(a.getAttribute("data-sort"))):(e&&e.set("innerHTML",""),t&&t.removeClass("dirty")&&this.sortContainer.removeClass("dirty"),u.sort_param="index")}if(this.target.settings.useHistory&&!this.blockPushState&&this._pushHistoryState(),this.customFiltersWrapper.one(".filterDropdown.dirty")?(this.customFiltersWrapper.addClass("dropdowns-dirty"),this.container.addClass("filter-dropdowns-dirty"),this.placedContainer&&this.placedContainer.addClass("filter-dropdowns-dirty")):(this.customFiltersWrapper.removeClass("dropdowns-dirty"),this.container.removeClass("filter-dropdowns-dirty"),this.placedContainer&&this.placedContainer.removeClass("filter-dropdowns-dirty")),this.customFiltersWrapper.one(".sortDropdown.dirty")?(this.customFiltersWrapper.addClass("dropdowns-dirty"),this.container.addClass("filter-sort-dirty"),this.placedContainer&&this.placedContainer.addClass("filter-sort-dirty")):(this.container.hasClass("filter-dropdowns-dirty")||this.customFiltersWrapper.removeClass("dropdowns-dirty"),this.container.removeClass("filter-sort-dirty"),this.placedContainer&&this.placedContainer.removeClass("filter-sort-dirty")),this.searchRegex?(this.customFiltersWrapper.addClass("search-dirty"),this.container.addClass("filter-search-dirty"),this.placedContainer&&this.placedContainer.addClass("filter-search-dirty")):(this.customFiltersWrapper.removeClass("search-dirty"),this.container.removeClass("filter-search-dirty"),this.placedContainer&&this.placedContainer.removeClass("filter-search-dirty")),this.parentFilter||this._buildFilterSelectors(),this.container.setAttribute("data-filter-selectors",this.filter_selectors).setAttribute("data-filter-sorters",this.sort_param),this.placedContainer&&this.placedContainer.setAttribute("data-filter-selectors",this.filter_selectors).setAttribute("data-filter-sorters",this.sort_param),this.searchContainer&&this.searchContainer.removeClass("searching"),this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&this.target.settings.mobilePanel.closeOnSelect&&(this.container.removeClass("mobile-panel-open"),u.placedContainer&&u.placedContainer.removeClass("mobile-panel-open"),Y.one("body").removeClass("filter-scroll-lock").setStyles({marginRight:"auto",overflow:"auto"})),u.filterSelectors)for(var s in u.filterSelectors)u.filterSelectors[s]=[];if(!u.sqs_query_factor||!u.sqs_query_not_found||u.filter_selectors){if(u.filter_selectors&&(u.sqs_query_not_found=!1),u.items&&u.items.size()){u.filtered=new Y.NodeList,u.hidden=new Y.NodeList;var n=u.target.settings.search.customSearchFunc,r=!!u.filter_selectors&&u.filter_selectors.trim().replace(/\*-\*/g,"").replace(/ /g,",");u.items.each(function(t){var e=u.searchRegex&&!n?u.searchFunction(t).match(u.searchRegex):!u.searchRegex||!n||"function"!=typeof n||n(!1,t),i=!r||t.test(r);if(u.needRunFilterFunctions&&i)for(var a in u.currentFilterValues)u.currentFilterValues.hasOwnProperty(a)&&u.currentFilterValues[a].filterFunction&&(i=u.currentFilterValues[a].filterFunction(t,u.currentFilterValues["__"+a+"-values"]));u.target.settings.advancedMap&&u.advancedMap&&u.target.settings.advancedMap.followMapBounds&&e&&i&&u.firstMapBoundRun&&(i="true"==t.getAttribute("data-in-bounds")),e&&i?(t.hasClass("element-hidden")&&t.removeClass("element-hidden"),t.addClass("element-showed").removeClass("marker-activated"),u.filtered.push(t),u.filterSelectors&&(t._node.classList&&t._node.classList.forEach?t._node.classList.forEach(function(t){u.filterSelectors[t]&&u.filterSelectors[t].push(1)}):t._node.className.split(" ").forEach(function(t){u.filterSelectors[t]&&u.filterSelectors[t].push(1)}))):(t.hasClass("element-hidden")||t.addClass("element-hidden"),t.removeClass("element-showed").removeClass("marker-activated"),u.hidden.push(t))}),u.sort_param&&(u.filtered=u._sortNodes(u.filtered)),u.filtered.size()||u.pagination&&(u.pagination.remove(),u.pagination=null,u.pagination_num=1),u._updateFilterOptions(u.filtered),u.isotope||u.mixitup||(u.container._node.__childFilters&&u.container._node.__childFilters.length||!u.itemsCount||u.itemsCount.one(".items-count").set("textContent",u.filtered.size()),u.filtered=u._buildPagination(u.filtered))}else u.pagination&&(u.pagination.remove(),u.pagination=null,u.pagination_num=1);u.filtered&&u.filtered.size()?(this.customFiltersWrapper.addClass("has-results").removeClass("no-results"),this.container.addClass("filter-has-results").removeClass("filter-has-no-results"),this.placedContainer&&this.placedContainer.addClass("filter-has-results").removeClass("filter-has-no-results")):(this.customFiltersWrapper.removeClass("has-results").addClass("no-results"),this.container.removeClass("filter-has-results").addClass("filter-has-no-results"),this.placedContainer&&this.placedContainer.removeClass("filter-has-results").addClass("filter-has-no-results")),this.requestComplete&&(this.blockPushState=!1),this.container.fire&&this.container.fire("custom-filter:sort-grid",{customFilter:u}),Y.fire("custom-filter:sort-grid",{customFilter:u}),this._sortChildFilters(),this.optionsDescriptionContainer&&this._showOptionsDescriptions(),u.target.settings.hooks&&u.target.settings.hooks.onFilter&&"function"==typeof u.target.settings.hooks.onFilter&&u.target.settings.hooks.onFilter(u),this.container.one(".active-marker-info")&&this.container.one(".active-marker-info").removeClass("active-marker-info"),u.isotope?(u.filterAnim?u.isotope.options.transitionDuration=u.isotope.options.origTransitionDuration:u.isotope.options.transitionDuration=0,u.isotope.arrange({sortBy:u.sort_param})):u.mixitup?u.mixitup.multimix({filter:u.filter_selectors,sort:u.sort_param.replace("_",":")}):u._simpleFilter()}},_pushHistoryState:function(){var t=this,e="";for(var i in t.currentFilterValues)if(t.currentFilterValues.hasOwnProperty(i)&&-1<i.indexOf("-values")&&t.currentFilterValues[i]&&t.currentFilterValues[i].length){var a=i.split("-values")[0].replace("__","")+"="+t.currentFilterValues[i];e=e?e+"&"+a:"?"+a}window.history&&window.location.search!==e&&window.history.pushState({url:window.location.pathname,search:e,docTitle:document.title,position:{x:window.scrollX,y:window.scrollY}},document.title,window.location.pathname+e)},_simpleFilter:function(){function t(){if(e){if(a.filter_ids="",e)if(a.target.settings.simpleFilter.persistent||a.hidden&&a.hidden.size()&&a.hidden.remove(),a.itemsParent)a.target.settings.simpleFilter.persistent?a.itemsParent.insert(e,a.itemsParent.one(".element-hidden")):a.itemsParent.insert(e,null);else if(a.container.hasClass("collection-type-blog")){var t=a.container.one(".blog-list")||a.container.one(".sqs-blog-list")||a.container.one(".BlogList");t&&(a.target.settings.simpleFilter.persistent?t.insert(e,t.one(".element-hidden")):t.insert(e,null))}else a.container.hasClass("ProductList")?a.container.one(".ProductList-grid")&&(a.target.settings.simpleFilter.persistent?a.container.one(".ProductList-grid").insert(e,a.container.one(".ProductList-grid").one(".element-hidden")):a.container.one(".ProductList-grid").insert(e,null)):a.container.insert(e,null);!function(t){a.gallery?(a.gallery?(a.gallery["gallery-design"]&&a.gallery["gallery-design"].dimensions&&(a.gallery["gallery-design"].dimensions=[]),a.container.hasClass("lazy-summary-enabled")||a.loadImages(t),t&&a.gallery.set("slides",t),a.container.hasClass("performance-mode-used")||a.gallery.refresh()):a.loadImages(t),et&&console.log("gallery refresh")):a.loadImages(t),a.advancedMap&&(a._addMarkersInstancesToItems(),a._filterAdvancedMapMarkers()),Y.fire("custom-filter:gallery-refresh",a),a.container.fire&&a.container.fire("custom-filter:gallery-refresh",{customFilter:a}),a.waitingForNewItems=!1,a.target.settings.hooks&&a.target.settings.hooks.afterFilter&&"function"==typeof a.target.settings.hooks.afterFilter&&a.target.settings.hooks.afterFilter(a)}(e),a.waitingForNewItems?et&&console.log("waiting..."):(a.target.settings.simpleFilter.anim&&e.each(function(t,e){var i=a.target.settings.simpleFilter.show.stagger*e;t.setStyles({transitionDelay:2200<i?"2200ms":i+"ms"})}),a.target.settings.simpleFilter.layoutAnim?a.itemsParent.removeClass("refreshing"):a.filterAnim&&a.target.settings.simpleFilter.anim?(et&&console.log("anim"),setTimeout(function(){a.itemsParent.removeClass("refreshing"),a.itemsParent.removeClass("hiding"),a.itemsParent.addClass("pre-showing"),setTimeout(function(){a.itemsParent.addClass("showing"),s?setTimeout(function(){a.itemsParent.removeClass("showing"),a.itemsParent.removeClass("pre-showing")},s):(a.itemsParent.removeClass("showing"),a.itemsParent.removeClass("pre-showing"))},17)},17)):(et&&console.log("no-anim"),a.itemsParent.removeClass("refreshing"),a.itemsParent.removeClass("hiding"),a.itemsParent.removeClass("showing"),a.itemsParent.removeClass("pre-showing")))}}var a=this,e=(this.container.hasClass("custom-filter-init-state"),!1),i=0,s=0;if(a.items&&a.items.size()){(e=a.filtered)&&0===e.size()?a.container.addClass("custom-filter-no-result"):a.container.removeClass("custom-filter-no-result");var n="";if(e&&e.size()&&(e.each(function(t){n+=t.get("_yuid")}),a.sorted_ids&&n===a.sorted_ids))return;a.sorted_ids=n;var r=a.hidden.size()?a.hidden.size()*a.target.settings.simpleFilter.hide.stagger:20,o=a.filtered?a.filtered.size()*a.target.settings.simpleFilter.show.stagger:20;a.filterAnim&&a.target.settings.simpleFilter.anim&&(i=a.target.settings.simpleFilter.hide.transitionDuration?a.target.settings.simpleFilter.hide.transitionDuration+r:0,i=Math.min(1e3,Math.max(20,i)),s=a.target.settings.simpleFilter.show.transitionDuration?a.target.settings.simpleFilter.show.transitionDuration+o:0,s=Math.min(500,Math.max(20,s))),et&&console.log(i,s),a.target.settings.simpleFilter.anim&&a.itemsParent.all(".custom-filter-grid-item").each(function(t,e){var i=a.target.settings.simpleFilter.hide.stagger*e;t.setStyles({transitionDelay:2e3<i?"0ms":i+"ms"})}),a.itemsParent.removeClass("showing"),a.filterAnim?(a.target.settings.simpleFilter.anim&&a.itemsParent.addClass("hiding"),i&&a.target.settings.simpleFilter.anim?setTimeout(function(){t()},i):t()):t()}},_addFLIPGroup:function(){if(this.target.settings.simpleFilter&&this.target.settings.simpleFilter.anim){function i(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}var a=this;window.FLIP&&(this.flipItems=[],a.flipGroup=null,this.items.each(function(t,e){t.hasClass("element-hidden")||a.flipItems.push({element:t._node,duration:a.target.settings.simpleFilter.transitionDuration,delay:1e3<a.target.settings.simpleFilter.stagger*e?0:a.target.settings.simpleFilter.stagger*e,easing:i})}),a.flipGroup=FLIP.group(this.flipItems))}},_checkInitState:function(t){var a=this;this.queryParams=null;var e=[];if(t&&(a.customFiltersWrapper.all(".archive-group-name-link").removeClass("active"),a.target.settings.initState={}),a.requestComplete&&a.target.settings.useHistory&&(a.blockPushState=!1),this.target.settings.urlQuery&&window.location.search&&-1<window.location.search.indexOf("=")){var i=window.location.search.substring(1);try{var s=JSON.parse('{"'+i.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(t,e){return""===t?e:decodeURIComponent(e.replace(/\+/g," "))});for(var n in this.queryParams=s)if(s[n]){if(a.getFilterAttrObj&&a.getFilterAttrObj[n]){a.target.settings.initState.filter||(a.target.settings.initState.filter=[]);var r=n+"|"+decodeURIComponent(s[n]);-1===a.target.settings.initState.filter.indexOf(r)&&a.target.settings.initState.filter.push(r)}else if(a.sortObj&&(a.sortObj[n]||a.sortObj[n+"_desc"])){a.target.settings.initState.sort||(a.target.settings.initState.sort=[]);var o=n+"|"+decodeURIComponent(s[n]);-1===a.target.settings.initState.sort.indexOf(o)&&a.target.settings.initState.sort.push(o)}e.push(decodeURIComponent(s[n]))}}catch(t){console.log(t)}}if(-1<window.location.pathname.indexOf("/category/")){var l=decodeURIComponent(window.location.pathname.split("/category/")[1].replace(/\+/g," "));a.target.settings.initState.filter||(a.target.settings.initState.filter=[]),-1===a.target.settings.initState.filter.indexOf("category|"+l)&&a.target.settings.initState.filter.push("category|"+l),l&&e.push(l)}if(-1<window.location.pathname.indexOf("/tag/")){var c=decodeURIComponent(window.location.pathname.split("/tag/")[1].replace(/\+/g," "));a.target.settings.initState.filter||(a.target.settings.initState.filter=[]),-1===a.target.settings.initState.filter.indexOf("tag|"+l)&&a.target.settings.initState.filter.push("tag|"+l),c&&e.push(c)}a.target.settings.compatCatTagInQuery&&e.length&&e.forEach(function(t){var e=a.customFiltersWrapper.all('.archive-group-name-link[data-filter][data-filter-val="'+nt(t)+'"]');e.size()?(e.addClass("active"),a.sqs_query_not_found=!1):a.sqs_query_not_found=!0}),(this.target.settings.initState&&(this.target.settings.initState.filter||this.target.settings.initState.sort)||t)&&(this.target.settings.initState.filter&&this.target.settings.initState.filter.length&&this.target.settings.initState.filter.forEach(function(t){var e=!!(t=t.toLowerCase().split("|"))[1]&&t[1].split(","),i=!!t[0]&&nt(t[0]);e&&i&&e.forEach(function(t){a.customFiltersWrapper.all('.archive-group-name-link[data-filter="'+i+'"][data-filter-val="all"]').removeClass("active"),a.customFiltersWrapper.all('.archive-group-name-link[data-filter="'+i+'"][data-filter-val="'+nt(t)+'"]').addClass("active")})}),this.target.settings.initState.sort&&this.target.settings.initState.sort.length&&(a.customFiltersWrapper.all(".archive-group-name-link[data-sort]").removeClass("active"),this.target.settings.initState.sort.forEach(function(t){if(t){var e=!!(t=t.toLowerCase().split("|"))[0]&&t[0].split(","),i=t[1]?nt(t[1]):"asc";e&&i&&e.forEach(function(t){t=nt(t),a.sort_param=t+"_"+i,a.customFiltersWrapper.all('.archive-group-name-link[data-sort="'+t+"_"+i+'"]').addClass("active")})}})),t&&this._sortGrid(),this.container.addClass("custom-filter-init-state"))},_initFiltering:function(){var r=this;if(this.filtersDropdowns=this.customFilters.all(".filterDropdown"),this.exclude_name=!!this.target.settings.excludeFilter&&nt(this.target.settings.excludeFilter.trim()),this.filtersDropdowns.size()&&this.filtersDropdowns.each(function(i){i.one("label");i.defaultLabel=(i.one(".archive-dropdown-toggle-title").get("textContent")||i.one(".archive-dropdown-toggle-title").get("innerText")).replace(/\r?\n|\r/g,"").trim();var a=i.all(".archive-group-name-link");a.removeAttribute("data-ajax-loader");var s=!!i.getAttribute("data-multiple")&&"true"===i.getAttribute("data-multiple");i.delegate("click",function(t){t.halt(),i.all(".archive-group-name-link.active").removeClass("active"),r.filterAnim=!0,r.advancedMap&&(r.needBoundsChange=!0),r._sortGrid()},".reset-button"),i.delegate("click",function(t){t.halt(),a=i.all(".archive-group-name-link"),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e=nt(i.getAttribute("data-all-option"));t.currentTarget.get("text").trim()!==e&&s?(t.currentTarget.toggleClass("active"),i.one('[data-filter-val="all"]')&&(t.currentTarget.getAttribute("data-filter-val")!==e?i.one('[data-filter-val="all"]').removeClass("active"):(a.removeClass("active"),t.currentTarget.addClass("active")),a.filter(".active").size()<1&&i.one('[data-filter-val="all"]').addClass("active"))):(t.currentTarget.addClass("clicked"),a.filter(":not(.clicked)").removeClass("active"),t.currentTarget.toggleClass("active"),t.currentTarget.removeClass("clicked")),r.target.settings.closeOptionsOnSelect&&i.one(".archive-dropdown-toggle-checkbox").set("checked",!1),r.filterAnim=!0,Y.fire("custom-filter:filter-filtering",{customFilter:r}),r.container.fire&&r.container.fire("custom-filter:filter-filtering",{customFilter:r,param:t.currentTarget.getAttribute("data-filter-val")}),r.advancedMap&&(r.needBoundsChange=!0),r._sortGrid()},".archive-group-name-link[data-filter-val]")}),this.searchContainer){var e=rt(function(t){r.searchContainer.addClass("searching"),t.newVal=t.newVal?t.newVal:!!t.target&&t.target.value,r.searchValue=t.newVal,r.searchRegex=new RegExp(t.newVal,"gi"),t.newVal&&t.newVal.trim()||r.searchContainer.removeClass("searching"),t.newVal?r.searchContainer.addClass("dirty"):r.searchContainer.removeClass("dirty"),r.target.settings.search.disableSearch||((!t.newVal||t.newVal.length<r.searchMinLength)&&(r.searchRegex=""),r.advancedMap&&(r.needBoundsChange=!0),r.target.settings.search.customSearchFunc?(!t.newVal||t.newVal.length>=r.searchMinLength)&&r.target.settings.search.customSearchFunc(t):(r.target.settings.mobilePanel.enabled,Y.fire("custom-filter:filter-sorting",{customFilter:r}),r.container.fire&&r.container.fire("custom-filter:filter-sorting",{customFilter:r,param:"searching.."}),r.isotope?(r.isotope.options.transitionDuration=r.isotope.options.origTransitionDuration,r.isotope.arrange({sortBy:r.sort_param})):r.mixitup?r.mixitup.sort():(r.filterAnim=!0,r._sortGrid())))},r.target.settings.search.timeout,!1);this.searchContainer.one(".search-input").on("valuechange",function(t){e(t)}),this.searchContainer.delegate("click",function(t){t.halt(),r.filterAnim=!0,r.searchContainer.one(".search-input").set("value",""),r.searchContainer.removeClass("dirty"),e({newVal:"",reset:!0})},".reset-button")}if(this.sortContainer){this.sortContainer.defaultLabel=this.sortContainer.one(".archive-dropdown-toggle-title").get("innerHTML");this.sortContainer.one("label");this.sortContainer.delegate("click",function(t){t.halt(),r.sortContainer.all(".archive-group-name-link.active").removeClass("active"),r.filterAnim=!0,r._sortGrid()},".reset-button"),this.sortContainer.delegate("click",function(t){t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.addClass("clicked"),r.sortContainer.all(":not(.clicked)").removeClass("active"),t.currentTarget.toggleClass("active"),t.currentTarget.removeClass("clicked"),r.target.settings.closeOptionsOnSelect&&r.sortContainer.one(".archive-dropdown-toggle-checkbox").set("checked",!1),r.container.fire&&r.container.fire("custom-filter:filter-sorting",{customFilter:r,param:t.currentTarget.getAttribute("data-filter-val")}),r.filterAnim=!0,Y.fire("custom-filter:filter-sorting",{customFilter:r}),r._sortGrid()},".archive-group-name-link[data-sort]")}et&&console.log("filter init");var o=this.config&&this.config.design?"autocolumns"==this.config.design:r.itemsParent&&r.itemsParent.hasClass("sqs-gallery")&&r.itemsParent.hasClass("sqs-gallery-design-autocolumns");if(this.autocolumns_there=o,(!this.target.settings.isotope.enabled||!1 in window)&&(!this.target.settings.mixitup.enabled||!1 in window)&&this.container.addClass("using-simple-filter"),this.customFiltersWrapper.one(".quick-options-search")){var i=rt(function(t){t.target.__ul_list=t.target.__ul_list||t.target.ancestor(".archive-group-list");var e=t.hasOwnProperty("newVal")&&t.newVal||t.target.get("value");e?t.target.get("parentNode").addClass("dirty"):t.target.get("parentNode").removeClass("dirty");var i=new RegExp(e,"gi");t.target.__ul_list&&t.target.__ul_list.all(".archive-group-name-link").each(function(t){t._node.textContent.trim().match(i)?t.get("parentNode").show():t.get("parentNode").hide()})},300,!1);this.customFiltersWrapper.all(".quick-options-search input").each(function(t){t.on("valuechange",i),t.get("parentNode").delegate("click",function(t){t.halt();var e=t.target.get("parentNode").one("input");e&&(e.set("value",""),i({target:e,newVal:"",reset:!0}))},".qos-reset-button")})}if("mixitup"in window&&this.target.settings.mixitup.enabled)et&&console.log("mixitup"),this.container.addClass("mixitup-filter-used"),r.mixitup=mixitup(r.itemsParent.getDOMNode(),{controls:{enable:!1},selectors:{target:r.target.items},animation:{duration:r.target.settings.mixitup.transitionDuration},callbacks:{onMixEnd:function(t){r.itemsCount&&r.itemsCount.one(".items-count").set("textContent",t.totalShow),0===t.totalShow?r.container.addClass("custom-filter-no-result"):r.container.removeClass("custom-filter-no-result"),r.advancedMap&&r._filterAdvancedMapMarkers(),Y.fire("custom-filter:gallery-refresh"),r.container.fire&&r.container.fire("custom-filter:gallery-refresh",{customFilter:r}),r.filterAnim=!1,r.waitingForNewItems=!1,r.target.settings.hooks&&r.target.settings.hooks.afterFilter&&"function"==typeof r.target.settings.hooks.afterFilter&&r.target.settings.hooks.afterFilter(r)}}});else if("Isotope"in window&&this.target.settings.isotope.enabled){et&&console.log("isotope"),this.container.addClass("isotope-filter-used");var l=this.target.settings.isotope.columnWidth?this.target.settings.isotope.columnWidth:this.config?this.config.columnWidth:this.items.item(0).get("outerWidth"),c=this.target.settings.isotope.gutter?this.target.settings.isotope.gutter:this.config?this.config.gutter:0,d=r.target.settings.isotope&&r.target.settings.isotope.transitionDuration?parseFloat(r.target.settings.isotope.transitionDuration):500;if(r.itemsParent.hasClass("sqs-gallery")&&r.itemsParent.getData("gallery")){var a=r.itemsParent.getData("gallery");r.itemsParent.clearData("gallery"),Y.Squarespace.GalleryManager&&(Y.Squarespace.GalleryManager._galleries&&Y.Squarespace.GalleryManager._galleries.length&&Y.Squarespace.GalleryManager._galleries.forEach(function(t,e){a._yuid===t._yuid&&(t.after("destroy",function(){et&&console.log("DESTROY"),o&&r.itemsParent.addClass("sqs-gallery-design-autocolumns"),r.itemsParent.setStyles({margin:null,marginBottom:null,marginTop:null})}),r.target.settings.isotope.columnWidth||(l=r.items.item(0).width()),t.destroy(),Y.Squarespace.GalleryManager._galleries.splice(e,1))}),a=null)}!function(){var e=r.itemsParent.hasClass("sqs-gallery");e&&r.itemsParent.addClass("clear").setStyle("height","auto"),c=parseFloat(c);var t=-1<((l=-1<(l+"").indexOf("%")?l:parseFloat(l)/r.itemsParent.width()*100+"%")+"").indexOf("%")?100/parseFloat(l):(r.itemsParent.width()/parseFloat(l)).toFixed(),i=-1==(c+"").indexOf("%")?parseFloat(c)/r.itemsParent.width()*100+"%":c+"px";r.itemsParent.append('<div style="width:'+i+'" class="gutter-sizer"></div>'),-1<(l+"").indexOf("%")&&-1<i.indexOf("%")&&(l=parseFloat(l)-(parseFloat(i)-parseFloat(i)/t)+"%"),r.isotope_item_width=l,r.isotope_column_gutter=i;var a={};for(var s in r.sortObj)r.sortObj.hasOwnProperty(s)&&-1<s.indexOf("_desc")&&(a[s]=!1);e&&r._setItemsMaxWidthStyle(l),r.items.each(function(t){e&&t.setStyles({width:"100%",height:null,left:null,top:null,visibility:"visible"}),r.config&&r.config.imageAspectRatio&&"autocolumns"!==r.config.design&&(t.one(".img-wrapper")?t.one(".img-wrapper")&&(t.one(".img-wrapper")&&!o&&t.one(".img-wrapper").setStyles({paddingBottom:100/parseFloat(r.config.imageAspectRatio)+"%"}),t.all("img").each(function(t){t.loader||t.plug(Y.Squarespace.Loader2,{mode:"fill",load:!1}),t.loader&&t.fire("refresh")})):t.one(".summary-thumbnail-container")&&!o&&t.one(".summary-thumbnail-container").setStyles({paddingBottom:100/parseFloat(r.config.imageAspectRatio)+"%"}))}),l=-1<(l+"").indexOf("%")?".custom-filter-grid-item":parseFloat(l),r.isotope=new Isotope(r.itemsParent.getDOMNode(),{itemSelector:r.target.items,transitionDuration:0,origTransitionDuration:d,initLayout:!0,layoutMode:r.target.settings.isotope&&r.target.settings.isotope.layoutMode?r.target.settings.isotope.layoutMode:o?"masonry":"fitRows",percentPosition:!0,stamp:r.target.settings.isotope&&r.target.settings.isotope.stamp?r.target.settings.isotope.stamp:".stamp",columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer",fitWidth:!0,fitRows:{columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer"},masonry:{columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer"},packery:{columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer"},filter:function(t,e){var i=t||e,a=!r.searchRegex||r.searchFunction(i).match(r.searchRegex),s=!r.filter_selectors||Y.one(i).test(r.filter_selectors.trim().replace(/ /g,","));return a&&s},sortAscending:h(a,{popular:!1}),getSortData:r.sortObj});var n=rt(function(t){r.itemsCount&&r.itemsCount.one(".items-count").set("textContent",t.length),0===t.length?r.container.addClass("custom-filter-no-result"):(r.container.removeClass("custom-filter-no-result"),r.itemsParent.all("img").each(function(t){t.hasClass("loaded")||(t.loader&&t.loader.set("load",!0),t.width()&&t.fire("refresh"))})),r.filterAnim=!1,r.waitingForNewItems=!1,r.advancedMap&&r._filterAdvancedMapMarkers(),Y.fire("custom-filter:gallery-refresh"),r.container.fire&&r.container.fire("custom-filter:gallery-refresh",{customFilter:r}),r.target.settings.hooks&&r.target.settings.hooks.afterFilter&&"function"==typeof r.target.settings.hooks.afterFilter&&r.target.settings.hooks.afterFilter(r)},100,!0);r.isotope.on("arrangeComplete",n),r.isotope.once("layoutComplete",function(t){et&&console.log("first layout"),t&&t.length&&t.forEach(function(t){t.element&&(t.element.style.overflow="hidden")})}),et&&console.log("isotope init"),r.filterAnim=!0,r._sortGrid(),Y.fire("custom-filter:isotope-inited",{customFilter:r}),r.container.fire&&r.container.fire("custom-filter:isotope-inited",{customFilter:r})}()}else et&&console.log("No filter library");if(r.itemsParent)if(r.gallery&&!r.container.hasClass("performance-mode-used")&&r.gallery.refresh(),window.imagesLoaded)imagesLoaded(r.itemsParent.getDOMNode(),function(t){r._sortGrid(),r.autocolumns_there&&r.gallery&&!r.container.hasClass("performance-mode-used")&&r.gallery.refresh()});else{var t=r.itemsParent.all("img"),s=0,n=t.size(),g=!1;n&&t.on("load",function(t){++s%10&&r.isotope&&r.isotope.layout(),n<=s&&!g&&(g=!0,r._sortGrid(),r.autocolumns_there&&r.gallery&&!r.container.hasClass("performance-mode-used")&&r.gallery.refresh())})}Y.once("domready",function(){r.autocolumns_there&&r.gallery&&!r.container.hasClass("performance-mode-used")&&r.gallery.refresh()})},_followMapBounds:function(t,e,i){t=t||this.advancedMap._node;e=e||t._map.getBounds();var a=!1;t.radiusCircle&&(e=t.radiusCircle.getBounds(),a=t.radiusCircle.getRadius()),console.log("mapBoundsChanged");var s=t._markers;if(s&&s.length)for(var n=s.length-1;0<=n;n--){var r=s[n],o=r.outsideItem&&r.outsideItem._node;if(o)if(i)o.dataset.inBounds=!0;else{var l=r.getPosition();if(a){var c=t.radiusCircle.getCenter();try{google.maps.geometry.spherical.computeDistanceBetween(l,c)<=a?o.dataset.inBounds=!0:o.dataset.inBounds=!1}catch(t){g(l.lat(),l.lng(),c.lat(),c.lng())<=a/1e3?o.dataset.inBounds=!0:o.dataset.inBounds=!1}}else e.contains(l)?o.dataset.inBounds=!0:o.dataset.inBounds=!1}}this._sortGrid(),this.firstMapBoundRun=!0},_buildMapRadiusCircle:function(t){var e=this,i=e.target.settings.advancedMap;if(e.advancedMap){var a=e.advancedMap;if(a._node.radiusCircle&&(a._node.radiusCircle.setMap(null),a._node.radiusCircle=null),!a._node.radiusCircle&&t.lat){var s=i.autocomplete.dimension.val||1e4,n=i.autocomplete.radius.val?i.autocomplete.radius.val*s:1e5,r=i.autocomplete.circle;r.map=a._node._map,r.center=t,r.radius=n,a._node.radiusCircle=new google.maps.Circle(r),setTimeout(function(){e.needBoundsChange=!0,e._followMapBounds(e.advancedMap._node,e.advancedMap._node.radiusCircle.getBounds())},50)}}},_initMapAutoComplete:function(){var i=this,t=i.target.settings.advancedMap;if(t.autocomplete&&t.autocomplete.enabled&&i.mapAutocompleteContainer){function e(){var t=i.mapAutocomplete.getPlace(),e={};t&&t.geometry.location&&(e={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}),function(t){position=t,i.container.addClass("position-found"),i.placedContainer&&i.placedContainer.addClass("position-found"),i&&i.items.size()&&(i.items.each(function(t){var e=t._node._item_data,i="";e&&e.location&&e.location.markerLat&&(i=g(position.lat,position.lng,parseFloat(e.location.markerLat),parseFloat(e.location.markerLng)),t._node._item_data.distance=i),t.setAttribute("data-distance",i)}),i.sortContainer&&i.sortContainer.one(".distance_asc a")&&i.sortContainer.one(".distance_asc a").addClass("active")),position&&i._buildMapRadiusCircle(position)}(e)}function a(){!i.mapAutocomplete&&s?(i.mapAutocomplete=new window.google.maps.places.Autocomplete(s,n),i.mapAutocomplete.addListener("place_changed",e)):console.log("Can't start Autocomplete")}var s=i.mapAutocompleteContainer.one(".search-input")._node,n=t.autocomplete.options||{};try{if(window.google&&window.google.maps&&window.google.maps.places&&window.google.maps.places.Autocomplete)a();else{if(window.google&&window.google.maps)!function(t,e,i,a,s){if((i=i||document.getElementsByTagName("head")[0]).querySelector("#"+e))a&&a(this);else{var n=document.createElement("script");n.src=t,n.id=e,n.onload=function(){s&&this.remove(),a&&a(this)},i.appendChild(n)}}("https://maps.googleapis.com/maps-api-v3/api/js/"+(window.google.maps.version.slice(2).replace(/\./g,"/")+"/places.js"),"google-maps-places",null,function(){console.log("Google Places Loaded"),a()});console.log("No Places API on page")}}catch(t){google&&google.maps&&google.maps.autocomplete||console.warn("We can't start autocomplete now")}}else console.log("Can't start Autocomplete")},_setItemsMaxWidthStyle:function(t){this.isotope_itemsWidthInRange=!1;t=t||this.isotope_item_width||"25%";var e=this.isotope_column_gutter&&-1<this.isotope_column_gutter.indexOf("%")?parseFloat(this.isotope_column_gutter):0;window.outerWidth<=1024&&(t=33.3-e+"%"),window.outerWidth<=640&&(t=50-e+"%"),window.outerWidth<=400&&(t="100%");var i="."+this.u_id+" .custom-filter-grid-item{max-width:"+t+";}";this.itemsWidthStyleNode&&this.itemsWidthStyleNode.remove(),this.itemsWidthStyleNode=Y.Node.create('<style id="'+this.u_id+'-ItemsWidthStyle">'+i+"</style>"),this.container.append(this.itemsWidthStyleNode)},_addItemsAttributes:function(t,e){this.coll_data&&this.coll_data.collection&&"events"==this.coll_data.collection.typeName&&(this.coll_data.upcoming,this.coll_data.past);function g(e,t,i,a){e.getAttribute("data-randomized")||e.setAttribute("data-index",i),P.target.settings.shuffle&&e.setAttribute("data-randomized",!0),a&&t&&(e.attrsAdded=!0),t&&(e._node._item_data=t),t.categories&&t.categories.length&&t.categories.forEach(function(t){-1===P.currentCats.indexOf(t)&&P.currentCats.push(t)}),t.tags&&t.tags.length&&t.tags.forEach(function(t){-1===P.currentTags.indexOf(t)&&P.currentTags.push(t)}),t.categories||(t.categories=[]),t.tags||(t.tags=[]),t.categories&&t.categories.indexOf("all"),t.tags&&t.tags.indexOf("all");var s,n=t.categories.length,r=t.tags.length,o=[],l=[];if(n)for(var c=n-1;0<=c;c--)o.push("category-"+nt(t.categories[c]));if(o.length&&o.forEach(function(t){e._node.className.indexOf(t)<0&&e.addClass(t)}),r)for(var d=r-1;0<=d;d--)l.push("tag-"+nt(t.tags[d]));if(l.length&&l.forEach(function(t){e._node.className.indexOf(t)<0&&e.addClass(t)}),t.hasOwnProperty("likeCount")&&e.setAttribute("data-like-count",t.likeCount),t.publishOn&&e.setAttribute("data-publish-on",t.publishOn),t.price){var g=parseInt((t.price+"").replace(/[^\d]/g,""));e.setAttribute("data-price",g),-1===P.items_prices.indexOf(g)&&P.items_prices.push(g)}if(t.variants&&t.variants.length){var u=[];t.variants.forEach(function(t){var e=t.onSale?t.salePrice:t.price;-1===u.indexOf(e)&&u.push(e)}),u.sort(function(t,e){return t-e}),e.setAttribute("data-price",u[0])}if(P.getFilterAttrObj&&Y.Object.keys(P.getFilterAttrObj).length)for(var p in P.getFilterAttrObj)if(P.getFilterAttrObj.hasOwnProperty(p)){var h,m=P.getFilterAttrObj[p].attr,f=P.getFilterAttrObj[p];if("function"==typeof m){var v=P.getFilterAttrObj[p].variantOption;h=v?m(t,v):m(e,t)}else{var b=(m=m.split("|"))[0],w=m[1]||!1,C=m[2]||!1,_=0<b.indexOf(".")?q(b,t):t[b];if(_){if(h=_,w)try{var y=Y.Node.create(h);y&&y.one(w)?(h=(y.one(w).get("textContent")||y.one(w).get("innerText")).replace(/\r?\n|\r/g,"").trim()||null,C&&(h=y.one(w).get(C).replace(/\r?\n|\r/g,"").trim()||null)):h=null}catch(t){et&&console.log(t)}}else{try{h=!!e.one(b)&&(e.one(b).get("textContent")||e.one(b).get("innerText")).replace(/\r?\n|\r/g,"").trim().split(",")}catch(t){et&&console.log(t)}!1===h&&t.categories}}h?"object"!=typeof h&&(h=[h]):h=[];var A="",F=P.getFilterAttrObj[p].allOption;h&&-1===h.indexOf(F)&&h.push(F),P.getFilterAttrObj[p].defaultAttrs&&(0===h.length||1===h.length&&h[0]===F)&&P.getFilterAttrObj[p].defaultAttrs.split("|").forEach(function(t){t=nt(t),-1===h.indexOf(t)&&h.push(t)});var k=h.length;if(k)for(var O=0;O<k;O++)if(h[O]=(h[O]+"").trim(),P.getFilterAttrObj[p].lowercase&&(h[O]=(s=h[O]).charAt(0).toUpperCase()+s.slice(1)),h[O]){if((h[O]==F||P.getFilterAttrObj[p].allowedOptions.length&&-1<P.getFilterAttrObj[p].allowedOptions.indexOf(h[O])||!P.getFilterAttrObj[p].allowedOptions.length)&&(!f.notAllowedOptions||f.notAllowedOptions&&f.notAllowedOptions.length&&-1===f.notAllowedOptions.indexOf(h[O]))&&(A+=" "+p+"-"+nt(h[O])),P.getFilterAttrObj[p].allowedPrefSuf){var x=new RegExp(P.getFilterAttrObj[p].allowedPrefSuf,"gi");h[O]=h[O].replace(x,"").trim()}(P.getFilterAttrObj[p].currentOptions.indexOf(h[O])<0&&P.getFilterAttrObj[p].allowedOptions.length&&-1<P.getFilterAttrObj[p].allowedOptions.indexOf(h[O])||P.getFilterAttrObj[p].currentOptions.indexOf(h[O])<0&&!P.getFilterAttrObj[p].allowedOptions.length)&&(h[O]===F||P.getFilterAttrObj[p].disableOptionsUpdate||(!f.notAllowedOptions||f.notAllowedOptions&&f.notAllowedOptions.length&&-1===f.notAllowedOptions.indexOf(h[O]))&&P.getFilterAttrObj[p].currentOptions.push(h[O]))}A&&(A=A.trim().split(" ")).forEach(function(t){e.addClass(t)})}var S=[];for(var I in P.sortObj)if(P.sortObj.hasOwnProperty(I)){var M=I.replace("_desc","").replace("_asc","");-1===S.indexOf(M)&&(S.push(M),"function"==typeof P.sortObj[I]&&(e.setAttribute("data-"+M,P.sortObj[I](e._node,t)),e._node.itemData=t))}P.isotope&&P.isotope.updateSortData()}var P=this,i=!1,a=!1;if(e&&e.size()&&(i=!0,a=P.items,P.items.size()&&P.items.size()!==e.size()?(P.items=new Y.NodeList(e._nodes),P.target.settings.shuffle&&(P.items._nodes=st(P.items._nodes))):P.items=new Y.NodeList(e._nodes)),t)P.items.each(function(t,e){var i=[],a=[];t.one(".summary-metadata-item--cats")?i=(t.one(".summary-metadata-item--cats").get("textContent")||t.one(".summary-metadata-item--cats").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".Blog-meta-item--categories")?i=(t.one(".Blog-meta-item--categories").get("textContent")||t.one(".Blog-meta-item--categories").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".entry-category")&&(i=(t.one(".entry-category").get("textContent")||t.one(".entry-category").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", ")),t.one(".summary-metadata-item--tags")?a=(t.one(".summary-metadata-item--tags").get("textContent")||t.one(".summary-metadata-item--tags").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".Blog-meta-item--tags")?a=(t.one(".Blog-meta-item--tags").get("textContent")||t.one(".Blog-meta-item--tags").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".entry-tags")&&(a=(t.one(".entry-tags").get("textContent")||t.one(".entry-tags").get("innerText")).replace(/\r?\n|\r/g,"").replace("Tagged:","").trim().split(", "));var s={categories:i,tags:a,price:t.one(".sqs-money-native")?parseFloat(t.one(".sqs-money-native").get("textContent").replace(/\D/g,"")):0,publishOn:t.one("time")?new Date(t.one("time").get("innerText")).getTime():"",likeCount:t.one(".like-count")?t.one(".like-count").get("innerText"):0};g(t,s,e)});else{var s=this.coll_data.collection&&this.coll_data.collection.collections?this.coll_data.collection.collections:this.coll_data.items;s&&s.length&&this.items&&this.items.size()&&(this.requestComplete,this.items&&this.items.size()&&this.items.item(this.items.size()-1)._node._LZSData?P.items.each(function(t,e){t._node._LZSData&&g(t,t._node._LZSData,e,"direct LZS logic")}):this.items.item(0).hasAttribute("data-item-id")?s.forEach(function(t,e){var i=P.items.filter('[data-item-id="'+t.id+'"]');i&&1==i.size()&&g(i.item(0),t,e,"Data Item Id")}):this.items.item(0).hasClass("index-section")&&this.items.item(0).getAttribute("id")&&0==this.items.item(0).getAttribute("id").indexOf("index-section")?s.forEach(function(t,e){var i=P.items.filter('[id="index-section-'+t.urlId+'"]');i&&1==i.size()&&g(i.item(0),t.items&&t.items[0]||t,e,"Index Section Id")}):this.items.item(0).hasClass("project")&&this.items.item(0).getAttribute("href")?s.forEach(function(t,e){if(t.items&&t.items[0]){var i=P.items.filter('[href="/'+t.urlId+'/"]');i&&1==i.size()&&g(i.item(0),t.items&&t.items[0]||t,e,"Index Gallery Item Id")}}):this.items.item(0).hasClass("summary-item")||this.items.item(0).hasAttribute("data-id")||!this.items.item(0).hasAttribute("data-item-id")&&!this.items.item(0).hasClass("archive-item-link")?s.forEach(function(i,a){var t=i.fullUrl,e=i.id,s=i.mainImage?i.mainImage.assetUrl:i.assetUrl,n=i.title.trim(),r=P.container.one(P.target.items)?P.container:P.items.toFrag(),o=r.one('.custom-filter-grid-item[data-id="'+e+'"]');if(o)o.attrsAdded||g(o,i,a,"id logic");else{var l=!!r.one('[data-src="'+s+'"]')&&r.one('[data-src="'+s+'"]').ancestor(P.target.items);if(l)l.attrsAdded||g(l,i,a,"asset logic");else{var c=!!(n&&t&&r.one('.summary-title-link[href="'+t+'"]')&&r.one('.summary-title-link[href="'+t+'"]').get("textContent").replace(/\r?\n|\r/g,"").trim()===n)&&r.one('.summary-title-link[href="'+t+'"]').ancestor(P.target.items);if(c)c.attrsAdded||g(c,i,a,"title&href logic");else{var d=!(!n||!r.one('[data-title="'+n+'"]'))&&r.one('[data-title="'+n+'"]').ancestor(P.target.items);if(d)d.attrsAdded||g(d,i,a,"title logic");else(8==i.recordType||"video"==i.recordTypeLabel)&&i.oembed&&i.oembed.html&&r.all(".summary-item-record-type-video").each(function(t){var e=t.one(".summary-thumbnail-container>.sqs-video-wrapper");e&&e.getAttribute("data-html")==i.oembed.html&&(t.attrsAdded||g(t,i,a,"video iframe logic"))})}}}}):this.items.item(0).hasClass("archive-item-link")?s.forEach(function(t,e){var i=t.fullUrl,a=P.container.one('.archive-item-link[href="'+i+'"]');a&&g(a,t,e)}):s.forEach(function(t,e){var i=P.container.one('.hentry[data-item-id="'+t.id+'"]')||P.container.one(P.target.items+'[href="'+t.fullUrl+'"]');i&&g(i,t,e)})),P.requestComplete=!0}this._addMarkersInstancesToItems(),i&&a&&(P.items=a),this.container.fire&&this.container.fire("custom-filter:attributes-added",{customFilter:P}),Y.fire("custom-filter:attributes-added",{customFilter:P})},_checkChildFilterForOptions:function(t){var e=this;if(t=t.customFilter||t,this.getFilterAttrObj&&t.getFilterAttrObj)for(var i in this.getFilterAttrObj)this.getFilterAttrObj.hasOwnProperty(i)&&t.getFilterAttrObj[i]&&t.getFilterAttrObj[i].currentOptions.forEach(function(t){-1==e.getFilterAttrObj[i].currentOptions.indexOf(t)&&e.getFilterAttrObj[i].currentOptions.push(t)})},_sortChildFilters:function(){if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length)for(var t=this.container._node.__childFilters,e=t.length-1;0<=e;e--)t[e].filter_selectors=this.filter_selectors,t[e].sort_param=this.sort_param,t[e].searchRegex=this.searchRegex,t[e].filterAnim=this.filterAnim,t[e]._sortGrid()},_countItemsInChildFilters:function(){if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length){for(var t=this.filtered.size(),e=this.container._node.__childFilters,i=e.length-1;0<=i;i--)t+=e[i].filtered.size();this.itemsCount&&this.itemsCount.one(".items-count").set("textContent",t)}},_registerChildFilters:function(){var e=this;if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length)for(var t=rt(function(t){e._countItemsInChildFilters()},100,!1),i=this.container._node.__childFilters,a=i.length-1;0<=a;a--)e._checkChildFilterForOptions(i[a]),i[a].container.on("custom-filter:cats-tags-filters-built",function(t){e._buildDropdowns(t.currentFilter)}),i[a].container.on("custom-filter:sort-grid",t)},_buildDropdowns:function(){this.coll_data||(this.coll_data={collection:{}});var t,r,o=this;(this.currentTags.length||this.currentCats.length)&&this.coll_data.collection&&((!this.coll_data.collection.categories||this.coll_data.collection.categories.length<this.currentCats.length-1)&&(this.coll_data.collection.categories=this.currentCats),(!this.coll_data.collection.tags||this.coll_data.collection.tags.length<this.currentTags.length-1)&&(this.coll_data.collection.tags=this.currentTags));var e=o.filterCachedOptions;if(o.getFilterAttrObj&&Y.Object.keys(o.getFilterAttrObj).length)for(var l in o.getFilterAttrObj)if(o.getFilterAttrObj.hasOwnProperty(l)&&o.getFilterAttrObj[l].container){var c=o.getFilterAttrObj[l],d=c.container,i=c.currentOptions;if(e&&e[l]&&-1==e[l].indexOf("li class=")&&!o.requestComplete&&(i=e[l]),"desc"===c.sort?i.sort(m)&&i.reverse():"asAllowed"===c.sort&&c.allowedHash?i.sort(function(t,e){return c.allowedHash[t]-c.allowedHash[e]}):"asOptions"===c.sort||"no-sort"===c.sort||(c.sort&&"function"==typeof c.sort?i.sort(c.sort):i.sort(m)),c.showAll){var a=c.allOption,s=i.indexOf(a);0<s?(i.splice(s,1),i.unshift(a)):-1===s&&i.unshift(a)}var n=d.one("ul");t=n.all(".archive-group-name-link.active"),r=[],t&&t.size()&&t.each(function(t){r.push(t.getAttribute("data-filter-val"))});var g=c.optionsDelimiter||"string"==typeof c.optionsDelimiter&&c.optionsDelimiter.length?' data-delimiter="'+c.optionsDelimiter+'" ':"";if(o.filterSelectors||(o.filterSelectors={}),i&&0<i.length){!e||e&&e[l],c.quickSearch?n.all(".archive-group").remove():n.empty();var u=new Y.NodeList;i.forEach(function(t,e){var i=t.trim()||"Set-name-here",a=nt(i);c.allOption;var s=-1<r.indexOf(a)?" active":"",n=d.one('[data-filter-val="'+a+'"]');n?n.getAttribute("data-ind")!=e&&(n.setAttribute("data-ind",e),0):u.push(Y.Node.create('<li class="archive-group"'+g+' data-ind="'+e+'"><a href="?'+l+"="+encodeURIComponent(i)+'" data-filter-val="'+a+'" data-filter="'+l+'" class="archive-group-name-link'+s+'">'+i+"</a></li>")),o.filterSelectors.hasOwnProperty(l+"-"+a)||(o.filterSelectors[l+"-"+a]=[])}),n&&u.size()&&n.append(u),d.show(),d.removeClass("first")}else null!==o.requestComplete&&!0!==o.requestComplete||n.one("li")||d.hide(),o.customFiltersWrapper.one(".sqs-block:not([hidden]):not(.items-count-wrapper)")&&o.customFiltersWrapper.one(".sqs-block:not([hidden]):not(.items-count-wrapper)").addClass("first");n.setAttribute("data-items-count",n.all(".archive-group").size())}if(this.container.fire&&this.container.fire("custom-filter:cats-tags-filters-built",{customFilter:o}),Y.fire("custom-filter:cats-tags-filters-built",{customFilter:o}),this.target.settings.updateFilterOptions&&this._updateFilterOptions(),o.target.settings&&o.target.settings.filter&&o.target.settings.filter.cacheOptions&&o.requestComplete&&o.filtersDropdowns&&o.filtersDropdowns.size()&&!o.filtersOptionsCached){var p=o.u_id+"_"+nt(o.customIndexUrl||o.collectionUrl)+"_filter_options_"+location.pathname,h={};o.filtersDropdowns.each(function(t){var e=t.getAttribute("data-filter"),i=t.one("ul");try{if(e&&i){var a=[];i.all("li").each(function(t){a.push(t.get("textContent"))}),h[e]=a}}catch(t){console.log(t)}});parseFloat(o.target.settings.filter.cacheOptions);lt(h,p),o.filtersOptionsCached=!0}},_destroy:function(){this.items.each(function(t){t.attrsAdded=!1}),this.isotope&&this.isotope.destroy(),this.container.removeClass("custom-filter-container").removeClass("isotope-filter-used").removeClass(this.all_filter_classes),this.customFiltersWrapper&&this.customFiltersWrapper.remove(),this.container.one(".custom-filter-grid")&&this.container.one(".custom-filter-grid").removeClass("custom-filter-grid"),this.container.one(".mobile-filter-trigger")&&this.container.one(".mobile-filter-trigger").remove(),this.container.one(".item-filter-loaded")&&this.container.all(".item-filter-loaded").remove(),window.removeEventListener("popstate",this.popstateListener)}},window.CustomSQSFilter?console.log("Seems Universal Filter was already started."):(window.CustomSQSFilter=b,window.Squarespace.onInitialize(Y,function(){w(),function(e){var t=(e=e||window).document.body;if(!e.SQSLayoutObserver&&t){var i=rt(function(t){Y.Global.fire("SQSLayout:edit",{context:t})},2e3,!1);e.SQSLayoutObserver=new MutationObserver(function(t){t.forEach(function(t){t.type&&"attributes"==t.type&&"class"===t.attributeName&&t.target.className&&t.target.className.length&&(-1<t.target.className.indexOf("sqs-layout-rendering")||-1<t.target.className.indexOf("sqs-editing"))&&i(e)})}),e.SQSLayoutObserver.observe(t,{childList:!0,subtree:!0,attributes:!0})}}(window),window._scrollBarWidth=window.innerWidth&&document.body&&document.body.offsetWidth?window.innerWidth-document.body.offsetWidth:0,r&&r.length&&r.forEach(function(t){t._registerChildFilters()})}),window.Squarespace.onDestroy(Y,function(){r&&r.length&&r.forEach(function(t){t._destroy()}),n&&(window.clearInterval(n),n=null),r=[],i&&(i.detach(),i=null),window.removeEventListener("resize",u),et&&console.log("destroy")})),window.Squarespace&&window.Squarespace.initializeSummaryV2Block&&(window.Squarespace.initializeSummaryV2Block=function(e){e.all(".sqs-block-summary-v2").each(function(t){(t.getAttribute("data-block-json")?JSON.parse(t.getAttribute("data-block-json")):{ignoreInit:!1}).ignoreInit||e.Squarespace.GalleryManager.initializeBlock(t)})})}();